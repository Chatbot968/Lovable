(function(Xe,le){typeof exports=="object"&&typeof module<"u"?le(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],le):(Xe=typeof globalThis<"u"?globalThis:Xe||self,le(Xe.ChatbotWidget={},Xe.React))})(this,function(Xe,le){"use strict";function aa(t){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const n in t)if(n!=="default"){const r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:()=>t[n]})}}return e.default=t,Object.freeze(e)}const W=aa(le);var ye=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ii(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function la(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Mn={exports:{}},zt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var si;function ua(){if(si)return zt;si=1;var t=le,e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,c){var u,h={},f=null,d=null;c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),l.ref!==void 0&&(d=l.ref);for(u in l)r.call(l,u)&&!s.hasOwnProperty(u)&&(h[u]=l[u]);if(a&&a.defaultProps)for(u in l=a.defaultProps,l)h[u]===void 0&&(h[u]=l[u]);return{$$typeof:e,type:a,key:f,ref:d,props:h,_owner:i.current}}return zt.Fragment=n,zt.jsx=o,zt.jsxs=o,zt}var Ft={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oi;function ca(){return oi||(oi=1,process.env.NODE_ENV!=="production"&&function(){var t=le,e=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.for("react.offscreen"),y=Symbol.iterator,b="@@iterator";function w(p){if(p===null||typeof p!="object")return null;var S=y&&p[y]||p[b];return typeof S=="function"?S:null}var v=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function C(p){{for(var S=arguments.length,P=new Array(S>1?S-1:0),U=1;U<S;U++)P[U-1]=arguments[U];k("error",p,P)}}function k(p,S,P){{var U=v.ReactDebugCurrentFrame,ee=U.getStackAddendum();ee!==""&&(S+="%s",P=P.concat([ee]));var ne=P.map(function(X){return String(X)});ne.unshift("Warning: "+S),Function.prototype.apply.call(console[p],console,ne)}}var I=!1,$=!1,_=!1,D=!1,G=!1,F;F=Symbol.for("react.module.reference");function j(p){return!!(typeof p=="string"||typeof p=="function"||p===r||p===s||G||p===i||p===c||p===u||D||p===d||I||$||_||typeof p=="object"&&p!==null&&(p.$$typeof===f||p.$$typeof===h||p.$$typeof===o||p.$$typeof===a||p.$$typeof===l||p.$$typeof===F||p.getModuleId!==void 0))}function O(p,S,P){var U=p.displayName;if(U)return U;var ee=S.displayName||S.name||"";return ee!==""?P+"("+ee+")":P}function T(p){return p.displayName||"Context"}function N(p){if(p==null)return null;if(typeof p.tag=="number"&&C("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case r:return"Fragment";case n:return"Portal";case s:return"Profiler";case i:return"StrictMode";case c:return"Suspense";case u:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case a:var S=p;return T(S)+".Consumer";case o:var P=p;return T(P._context)+".Provider";case l:return O(p,p.render,"ForwardRef");case h:var U=p.displayName||null;return U!==null?U:N(p.type)||"Memo";case f:{var ee=p,ne=ee._payload,X=ee._init;try{return N(X(ne))}catch{return null}}}return null}var M=Object.assign,L=0,oe,te,fe,me,g,ue,$e;function m(){}m.__reactDisabledLog=!0;function Ie(){{if(L===0){oe=console.log,te=console.info,fe=console.warn,me=console.error,g=console.group,ue=console.groupCollapsed,$e=console.groupEnd;var p={configurable:!0,enumerable:!0,value:m,writable:!0};Object.defineProperties(console,{info:p,log:p,warn:p,error:p,group:p,groupCollapsed:p,groupEnd:p})}L++}}function Ke(){{if(L--,L===0){var p={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:M({},p,{value:oe}),info:M({},p,{value:te}),warn:M({},p,{value:fe}),error:M({},p,{value:me}),group:M({},p,{value:g}),groupCollapsed:M({},p,{value:ue}),groupEnd:M({},p,{value:$e})})}L<0&&C("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var ce=v.ReactCurrentDispatcher,Je;function Oe(p,S,P){{if(Je===void 0)try{throw Error()}catch(ee){var U=ee.stack.trim().match(/\n( *(at )?)/);Je=U&&U[1]||""}return`
`+Je+p}}var Ve=!1,ze;{var Dt=typeof WeakMap=="function"?WeakMap:Map;ze=new Dt}function Ln(p,S){if(!p||Ve)return"";{var P=ze.get(p);if(P!==void 0)return P}var U;Ve=!0;var ee=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var ne;ne=ce.current,ce.current=null,Ie();try{if(S){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(Te){U=Te}Reflect.construct(p,[],X)}else{try{X.call()}catch(Te){U=Te}p.call(X.prototype)}}else{try{throw Error()}catch(Te){U=Te}p()}}catch(Te){if(Te&&U&&typeof Te.stack=="string"){for(var Y=Te.stack.split(`
`),_e=U.stack.split(`
`),he=Y.length-1,pe=_e.length-1;he>=1&&pe>=0&&Y[he]!==_e[pe];)pe--;for(;he>=1&&pe>=0;he--,pe--)if(Y[he]!==_e[pe]){if(he!==1||pe!==1)do if(he--,pe--,pe<0||Y[he]!==_e[pe]){var De=`
`+Y[he].replace(" at new "," at ");return p.displayName&&De.includes("<anonymous>")&&(De=De.replace("<anonymous>",p.displayName)),typeof p=="function"&&ze.set(p,De),De}while(he>=1&&pe>=0);break}}}finally{Ve=!1,ce.current=ne,Ke(),Error.prepareStackTrace=ee}var Mt=p?p.displayName||p.name:"",vt=Mt?Oe(Mt):"";return typeof p=="function"&&ze.set(p,vt),vt}function Yr(p,S,P){return Ln(p,!1)}function Xr(p){var S=p.prototype;return!!(S&&S.isReactComponent)}function gt(p,S,P){if(p==null)return"";if(typeof p=="function")return Ln(p,Xr(p));if(typeof p=="string")return Oe(p);switch(p){case c:return Oe("Suspense");case u:return Oe("SuspenseList")}if(typeof p=="object")switch(p.$$typeof){case l:return Yr(p.render);case h:return gt(p.type,S,P);case f:{var U=p,ee=U._payload,ne=U._init;try{return gt(ne(ee),S,P)}catch{}}}return""}var ot=Object.prototype.hasOwnProperty,an={},$n=v.ReactDebugCurrentFrame;function mt(p){if(p){var S=p._owner,P=gt(p.type,p._source,S?S.type:null);$n.setExtraStackFrame(P)}else $n.setExtraStackFrame(null)}function Dn(p,S,P,U,ee){{var ne=Function.call.bind(ot);for(var X in p)if(ne(p,X)){var Y=void 0;try{if(typeof p[X]!="function"){var _e=Error((U||"React class")+": "+P+" type `"+X+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof p[X]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw _e.name="Invariant Violation",_e}Y=p[X](S,X,U,P,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(he){Y=he}Y&&!(Y instanceof Error)&&(mt(ee),C("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",U||"React class",P,X,typeof Y),mt(null)),Y instanceof Error&&!(Y.message in an)&&(an[Y.message]=!0,mt(ee),C("Failed %s type: %s",P,Y.message),mt(null))}}}var Qr=Array.isArray;function ln(p){return Qr(p)}function Zr(p){{var S=typeof Symbol=="function"&&Symbol.toStringTag,P=S&&p[Symbol.toStringTag]||p.constructor.name||"Object";return P}}function ei(p){try{return Nn(p),!1}catch{return!0}}function Nn(p){return""+p}function x(p){if(ei(p))return C("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Zr(p)),Nn(p)}var A=v.ReactCurrentOwner,B={key:!0,ref:!0,__self:!0,__source:!0},K,Z;function Re(p){if(ot.call(p,"ref")){var S=Object.getOwnPropertyDescriptor(p,"ref").get;if(S&&S.isReactWarning)return!1}return p.ref!==void 0}function Ye(p){if(ot.call(p,"key")){var S=Object.getOwnPropertyDescriptor(p,"key").get;if(S&&S.isReactWarning)return!1}return p.key!==void 0}function Fe(p,S){typeof p.ref=="string"&&A.current}function yt(p,S){{var P=function(){K||(K=!0,C("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",S))};P.isReactWarning=!0,Object.defineProperty(p,"key",{get:P,configurable:!0})}}function bt(p,S){{var P=function(){Z||(Z=!0,C("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",S))};P.isReactWarning=!0,Object.defineProperty(p,"ref",{get:P,configurable:!0})}}var we=function(p,S,P,U,ee,ne,X){var Y={$$typeof:e,type:p,key:S,ref:P,props:X,_owner:ne};return Y._store={},Object.defineProperty(Y._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(Y,"_self",{configurable:!1,enumerable:!1,writable:!1,value:U}),Object.defineProperty(Y,"_source",{configurable:!1,enumerable:!1,writable:!1,value:ee}),Object.freeze&&(Object.freeze(Y.props),Object.freeze(Y)),Y};function at(p,S,P,U,ee){{var ne,X={},Y=null,_e=null;P!==void 0&&(x(P),Y=""+P),Ye(S)&&(x(S.key),Y=""+S.key),Re(S)&&(_e=S.ref,Fe(S,ee));for(ne in S)ot.call(S,ne)&&!B.hasOwnProperty(ne)&&(X[ne]=S[ne]);if(p&&p.defaultProps){var he=p.defaultProps;for(ne in he)X[ne]===void 0&&(X[ne]=he[ne])}if(Y||_e){var pe=typeof p=="function"?p.displayName||p.name||"Unknown":p;Y&&yt(X,pe),_e&&bt(X,pe)}return we(p,Y,_e,ee,U,A.current,X)}}var je=v.ReactCurrentOwner,Zo=v.ReactDebugCurrentFrame;function Nt(p){if(p){var S=p._owner,P=gt(p.type,p._source,S?S.type:null);Zo.setExtraStackFrame(P)}else Zo.setExtraStackFrame(null)}var ti;ti=!1;function ni(p){return typeof p=="object"&&p!==null&&p.$$typeof===e}function ea(){{if(je.current){var p=N(je.current.type);if(p)return`

Check the render method of \``+p+"`."}return""}}function ng(p){return""}var ta={};function rg(p){{var S=ea();if(!S){var P=typeof p=="string"?p:p.displayName||p.name;P&&(S=`

Check the top-level render call using <`+P+">.")}return S}}function na(p,S){{if(!p._store||p._store.validated||p.key!=null)return;p._store.validated=!0;var P=rg(S);if(ta[P])return;ta[P]=!0;var U="";p&&p._owner&&p._owner!==je.current&&(U=" It was passed a child from "+N(p._owner.type)+"."),Nt(p),C('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',P,U),Nt(null)}}function ra(p,S){{if(typeof p!="object")return;if(ln(p))for(var P=0;P<p.length;P++){var U=p[P];ni(U)&&na(U,S)}else if(ni(p))p._store&&(p._store.validated=!0);else if(p){var ee=w(p);if(typeof ee=="function"&&ee!==p.entries)for(var ne=ee.call(p),X;!(X=ne.next()).done;)ni(X.value)&&na(X.value,S)}}}function ig(p){{var S=p.type;if(S==null||typeof S=="string")return;var P;if(typeof S=="function")P=S.propTypes;else if(typeof S=="object"&&(S.$$typeof===l||S.$$typeof===h))P=S.propTypes;else return;if(P){var U=N(S);Dn(P,p.props,"prop",U,p)}else if(S.PropTypes!==void 0&&!ti){ti=!0;var ee=N(S);C("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",ee||"Unknown")}typeof S.getDefaultProps=="function"&&!S.getDefaultProps.isReactClassApproved&&C("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function sg(p){{for(var S=Object.keys(p.props),P=0;P<S.length;P++){var U=S[P];if(U!=="children"&&U!=="key"){Nt(p),C("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",U),Nt(null);break}}p.ref!==null&&(Nt(p),C("Invalid attribute `ref` supplied to `React.Fragment`."),Nt(null))}}var ia={};function sa(p,S,P,U,ee,ne){{var X=j(p);if(!X){var Y="";(p===void 0||typeof p=="object"&&p!==null&&Object.keys(p).length===0)&&(Y+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var _e=ng();_e?Y+=_e:Y+=ea();var he;p===null?he="null":ln(p)?he="array":p!==void 0&&p.$$typeof===e?(he="<"+(N(p.type)||"Unknown")+" />",Y=" Did you accidentally export a JSX literal instead of a component?"):he=typeof p,C("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",he,Y)}var pe=at(p,S,P,ee,ne);if(pe==null)return pe;if(X){var De=S.children;if(De!==void 0)if(U)if(ln(De)){for(var Mt=0;Mt<De.length;Mt++)ra(De[Mt],p);Object.freeze&&Object.freeze(De)}else C("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else ra(De,p)}if(ot.call(S,"key")){var vt=N(p),Te=Object.keys(S).filter(function(hg){return hg!=="key"}),ri=Te.length>0?"{key: someKey, "+Te.join(": ..., ")+": ...}":"{key: someKey}";if(!ia[vt+ri]){var cg=Te.length>0?"{"+Te.join(": ..., ")+": ...}":"{}";C(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,ri,vt,cg,vt),ia[vt+ri]=!0}}return p===r?sg(pe):ig(pe),pe}}function og(p,S,P){return sa(p,S,P,!0)}function ag(p,S,P){return sa(p,S,P,!1)}var lg=ag,ug=og;Ft.Fragment=r,Ft.jsx=lg,Ft.jsxs=ug}()),Ft}process.env.NODE_ENV==="production"?Mn.exports=ua():Mn.exports=ca();var R=Mn.exports;function ai(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function ha(...t){return e=>{let n=!1;const r=t.map(i=>{const s=ai(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():ai(t[i],null)}}}}function li(t){const e=fa(t),n=W.forwardRef((r,i)=>{const{children:s,...o}=r,a=W.Children.toArray(s),l=a.find(ga);if(l){const c=l.props.children,u=a.map(h=>h===l?W.Children.count(c)>1?W.Children.only(null):W.isValidElement(c)?c.props.children:null:h);return R.jsx(e,{...o,ref:i,children:W.isValidElement(c)?W.cloneElement(c,void 0,u):null})}return R.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}var da=li("Slot");function fa(t){const e=W.forwardRef((n,r)=>{const{children:i,...s}=n;if(W.isValidElement(i)){const o=ya(i),a=ma(s,i.props);return i.type!==W.Fragment&&(a.ref=r?ha(r,o):o),W.cloneElement(i,a)}return W.Children.count(i)>1?W.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var pa=Symbol("radix.slottable");function ga(t){return W.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===pa}function ma(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function ya(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function ui(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=ui(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function ci(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=ui(t))&&(r&&(r+=" "),r+=e);return r}const hi=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,di=ci,ba=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return di(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const u=n==null?void 0:n[c],h=s==null?void 0:s[c];if(u===null)return null;const f=hi(u)||hi(h);return i[c][f]}),a=n&&Object.entries(n).reduce((c,u)=>{let[h,f]=u;return f===void 0||(c[h]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:h,className:f,...d}=u;return Object.entries(d).every(y=>{let[b,w]=y;return Array.isArray(w)?w.includes({...s,...a}[b]):{...s,...a}[b]===w})?[...c,h,f]:c},[]);return di(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},zn="-",va=t=>{const e=_a(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(zn);return a[0]===""&&a.length!==1&&a.shift(),fi(a,e)||wa(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},fi=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?fi(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(zn);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},pi=/^\[(.+)\]$/,wa=t=>{if(pi.test(t)){const e=pi.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},_a=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return ka(Object.entries(t.classGroups),n).forEach(([s,o])=>{Fn(o,r,s,e)}),r},Fn=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:gi(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(xa(i)){Fn(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{Fn(o,gi(e,s),n,r)})})},gi=(t,e)=>{let n=t;return e.split(zn).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},xa=t=>t.isThemeGetter,ka=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[n,i]}):t,Sa=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},mi="!",Ea=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,o=a=>{const l=[];let c=0,u=0,h;for(let w=0;w<a.length;w++){let v=a[w];if(c===0){if(v===i&&(r||a.slice(w,w+s)===e)){l.push(a.slice(u,w)),u=w+s;continue}if(v==="/"){h=w;continue}}v==="["?c++:v==="]"&&c--}const f=l.length===0?a:a.substring(u),d=f.startsWith(mi),y=d?f.substring(1):f,b=h&&h>u?h-u:void 0;return{modifiers:l,hasImportantModifier:d,baseClassName:y,maybePostfixModifierPosition:b}};return n?a=>n({className:a,parseClassName:o}):o},Ca=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},Ta=t=>({cache:Sa(t.cacheSize),parseClassName:Ea(t),...va(t)}),Aa=/\s+/,Pa=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(Aa);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:d}=n(c);let y=!!d,b=r(y?f.substring(0,d):f);if(!b){if(!y){a=c+(a.length>0?" "+a:a);continue}if(b=r(f),!b){a=c+(a.length>0?" "+a:a);continue}y=!1}const w=Ca(u).join(":"),v=h?w+mi:w,C=v+b;if(s.includes(C))continue;s.push(C);const k=i(b,y);for(let I=0;I<k.length;++I){const $=k[I];s.push(v+$)}a=c+(a.length>0?" "+a:a)}return a};function Ia(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=yi(e))&&(r&&(r+=" "),r+=n);return r}const yi=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=yi(t[r]))&&(n&&(n+=" "),n+=e);return n};function Oa(t,...e){let n,r,i,s=o;function o(l){const c=e.reduce((u,h)=>h(u),t());return n=Ta(c),r=n.cache.get,i=n.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=Pa(l,n);return i(l,u),u}return function(){return s(Ia.apply(null,arguments))}}const ae=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},bi=/^\[(?:([a-z-]+):)?(.+)\]$/i,Ra=/^\d+\/\d+$/,ja=new Set(["px","full","screen"]),La=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,$a=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Da=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Na=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Ma=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,He=t=>wt(t)||ja.has(t)||Ra.test(t),Qe=t=>_t(t,"length",Wa),wt=t=>!!t&&!Number.isNaN(Number(t)),Un=t=>_t(t,"number",wt),Ut=t=>!!t&&Number.isInteger(Number(t)),za=t=>t.endsWith("%")&&wt(t.slice(0,-1)),V=t=>bi.test(t),Ze=t=>La.test(t),Fa=new Set(["length","size","percentage"]),Ua=t=>_t(t,Fa,vi),Ba=t=>_t(t,"position",vi),qa=new Set(["image","url"]),Va=t=>_t(t,qa,Ka),Ha=t=>_t(t,"",Ga),Bt=()=>!0,_t=(t,e,n)=>{const r=bi.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},Wa=t=>$a.test(t)&&!Da.test(t),vi=()=>!1,Ga=t=>Na.test(t),Ka=t=>Ma.test(t),Ja=Oa(()=>{const t=ae("colors"),e=ae("spacing"),n=ae("blur"),r=ae("brightness"),i=ae("borderColor"),s=ae("borderRadius"),o=ae("borderSpacing"),a=ae("borderWidth"),l=ae("contrast"),c=ae("grayscale"),u=ae("hueRotate"),h=ae("invert"),f=ae("gap"),d=ae("gradientColorStops"),y=ae("gradientColorStopPositions"),b=ae("inset"),w=ae("margin"),v=ae("opacity"),C=ae("padding"),k=ae("saturate"),I=ae("scale"),$=ae("sepia"),_=ae("skew"),D=ae("space"),G=ae("translate"),F=()=>["auto","contain","none"],j=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",V,e],T=()=>[V,e],N=()=>["",He,Qe],M=()=>["auto",wt,V],L=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],oe=()=>["solid","dashed","dotted","double","none"],te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],fe=()=>["start","end","center","between","around","evenly","stretch"],me=()=>["","0",V],g=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ue=()=>[wt,V];return{cacheSize:500,separator:":",theme:{colors:[Bt],spacing:[He,Qe],blur:["none","",Ze,V],brightness:ue(),borderColor:[t],borderRadius:["none","","full",Ze,V],borderSpacing:T(),borderWidth:N(),contrast:ue(),grayscale:me(),hueRotate:ue(),invert:me(),gap:T(),gradientColorStops:[t],gradientColorStopPositions:[za,Qe],inset:O(),margin:O(),opacity:ue(),padding:T(),saturate:ue(),scale:ue(),sepia:me(),skew:ue(),space:T(),translate:T()},classGroups:{aspect:[{aspect:["auto","square","video",V]}],container:["container"],columns:[{columns:[Ze]}],"break-after":[{"break-after":g()}],"break-before":[{"break-before":g()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...L(),V]}],overflow:[{overflow:j()}],"overflow-x":[{"overflow-x":j()}],"overflow-y":[{"overflow-y":j()}],overscroll:[{overscroll:F()}],"overscroll-x":[{"overscroll-x":F()}],"overscroll-y":[{"overscroll-y":F()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[b]}],"inset-x":[{"inset-x":[b]}],"inset-y":[{"inset-y":[b]}],start:[{start:[b]}],end:[{end:[b]}],top:[{top:[b]}],right:[{right:[b]}],bottom:[{bottom:[b]}],left:[{left:[b]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ut,V]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",V]}],grow:[{grow:me()}],shrink:[{shrink:me()}],order:[{order:["first","last","none",Ut,V]}],"grid-cols":[{"grid-cols":[Bt]}],"col-start-end":[{col:["auto",{span:["full",Ut,V]},V]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[Bt]}],"row-start-end":[{row:["auto",{span:[Ut,V]},V]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",V]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",V]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...fe()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...fe(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...fe(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[C]}],px:[{px:[C]}],py:[{py:[C]}],ps:[{ps:[C]}],pe:[{pe:[C]}],pt:[{pt:[C]}],pr:[{pr:[C]}],pb:[{pb:[C]}],pl:[{pl:[C]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[D]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[D]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",V,e]}],"min-w":[{"min-w":[V,e,"min","max","fit"]}],"max-w":[{"max-w":[V,e,"none","full","min","max","fit","prose",{screen:[Ze]},Ze]}],h:[{h:[V,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[V,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[V,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[V,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ze,Qe]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Un]}],"font-family":[{font:[Bt]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",V]}],"line-clamp":[{"line-clamp":["none",wt,Un]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",He,V]}],"list-image":[{"list-image":["none",V]}],"list-style-type":[{list:["none","disc","decimal",V]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...oe(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",He,Qe]}],"underline-offset":[{"underline-offset":["auto",He,V]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",V]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",V]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...L(),Ba]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Ua]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Va]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[d]}],"gradient-via":[{via:[d]}],"gradient-to":[{to:[d]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...oe(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:oe()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...oe()]}],"outline-offset":[{"outline-offset":[He,V]}],"outline-w":[{outline:[He,Qe]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:N()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[He,Qe]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ze,Ha]}],"shadow-color":[{shadow:[Bt]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...te(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":te()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Ze,V]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[k]}],sepia:[{sepia:[$]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[k]}],"backdrop-sepia":[{"backdrop-sepia":[$]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",V]}],duration:[{duration:ue()}],ease:[{ease:["linear","in","out","in-out",V]}],delay:[{delay:ue()}],animate:[{animate:["none","spin","ping","pulse","bounce",V]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[I]}],"scale-x":[{"scale-x":[I]}],"scale-y":[{"scale-y":[I]}],rotate:[{rotate:[Ut,V]}],"translate-x":[{"translate-x":[G]}],"translate-y":[{"translate-y":[G]}],"skew-x":[{"skew-x":[_]}],"skew-y":[{"skew-y":[_]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",V]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",V]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",V]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[He,Qe,Un]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function lt(...t){return Ja(ci(t))}const Ya=ba("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),xt=W.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?da:"button";return R.jsx(o,{className:lt(Ya({variant:e,size:n,className:t})),ref:s,...i})});xt.displayName="Button";const wi=W.forwardRef(({className:t,type:e,...n},r)=>R.jsx("input",{type:e,className:lt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));wi.displayName="Input";const _i=W.forwardRef(({className:t,...e},n)=>R.jsx("div",{ref:n,className:lt("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));_i.displayName="Card";const xi=W.forwardRef(({className:t,...e},n)=>R.jsx("div",{ref:n,className:lt("p-6 pt-0",t),...e}));xi.displayName="CardContent";function Xa(t,e=[]){let n=[];function r(s,o){const a=W.createContext(o),l=n.length;n=[...n,o];const c=h=>{var v;const{scope:f,children:d,...y}=h,b=((v=f==null?void 0:f[t])==null?void 0:v[l])||a,w=W.useMemo(()=>y,Object.values(y));return R.jsx(b.Provider,{value:w,children:d})};c.displayName=s+"Provider";function u(h,f){var b;const d=((b=f==null?void 0:f[t])==null?void 0:b[l])||a,y=W.useContext(d);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[c,u]}const i=()=>{const s=n.map(o=>W.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return W.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,Qa(i,...e)]}function Qa(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(s)[`__scope${c}`];return{...a,...h}},{});return W.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Za(t){const e=W.useRef(t);return W.useEffect(()=>{e.current=t}),W.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}var Bn=globalThis!=null&&globalThis.document?W.useLayoutEffect:()=>{},el=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],qn=el.reduce((t,e)=>{const n=li(`Primitive.${e}`),r=W.forwardRef((i,s)=>{const{asChild:o,...a}=i,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),R.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),Vn={exports:{}},Hn={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ki;function tl(){if(ki)return Hn;ki=1;var t=le;function e(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(h,f){var d=f(),y=r({inst:{value:d,getSnapshot:f}}),b=y[0].inst,w=y[1];return s(function(){b.value=d,b.getSnapshot=f,l(b)&&w({inst:b})},[h,d,f]),i(function(){return l(b)&&w({inst:b}),h(function(){l(b)&&w({inst:b})})},[h]),o(d),d}function l(h){var f=h.getSnapshot;h=h.value;try{var d=f();return!n(h,d)}catch{return!0}}function c(h,f){return f()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return Hn.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,Hn}var Wn={};/**
 * @license React
 * use-sync-external-store-shim.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Si;function nl(){return Si||(Si=1,process.env.NODE_ENV!=="production"&&function(){function t(d,y){return d===y&&(d!==0||1/d===1/y)||d!==d&&y!==y}function e(d,y){u||i.startTransition===void 0||(u=!0,console.error("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var b=y();if(!h){var w=y();s(b,w)||(console.error("The result of getSnapshot should be cached to avoid an infinite loop"),h=!0)}w=o({inst:{value:b,getSnapshot:y}});var v=w[0].inst,C=w[1];return l(function(){v.value=b,v.getSnapshot=y,n(v)&&C({inst:v})},[d,b,y]),a(function(){return n(v)&&C({inst:v}),d(function(){n(v)&&C({inst:v})})},[d]),c(b),b}function n(d){var y=d.getSnapshot;d=d.value;try{var b=y();return!s(d,b)}catch{return!0}}function r(d,y){return y()}typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());var i=le,s=typeof Object.is=="function"?Object.is:t,o=i.useState,a=i.useEffect,l=i.useLayoutEffect,c=i.useDebugValue,u=!1,h=!1,f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?r:e;Wn.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:f,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error())}()),Wn}process.env.NODE_ENV==="production"?Vn.exports=tl():Vn.exports=nl();var rl=Vn.exports;function il(){return rl.useSyncExternalStore(sl,()=>!0,()=>!1)}function sl(){return()=>{}}var Gn="Avatar",[ol,fg]=Xa(Gn),[al,Ei]=ol(Gn),Ci=W.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[i,s]=W.useState("idle");return R.jsx(al,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:s,children:R.jsx(qn.span,{...r,ref:e})})});Ci.displayName=Gn;var Ti="AvatarImage",Ai=W.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...s}=t,o=Ei(Ti,n),a=ll(r,s),l=Za(c=>{i(c),o.onImageLoadingStatusChange(c)});return Bn(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?R.jsx(qn.img,{...s,ref:e,src:r}):null});Ai.displayName=Ti;var Pi="AvatarFallback",Ii=W.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...i}=t,s=Ei(Pi,n),[o,a]=W.useState(r===void 0);return W.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(l)}},[r]),o&&s.imageLoadingStatus!=="loaded"?R.jsx(qn.span,{...i,ref:e}):null});Ii.displayName=Pi;function Oi(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function ll(t,{referrerPolicy:e,crossOrigin:n}){const r=il(),i=W.useRef(null),s=r?(i.current||(i.current=new window.Image),i.current):null,[o,a]=W.useState(()=>Oi(s,t));return Bn(()=>{a(Oi(s,t))},[s,t]),Bn(()=>{const l=h=>()=>{a(h)};if(!s)return;const c=l("loaded"),u=l("error");return s.addEventListener("load",c),s.addEventListener("error",u),e&&(s.referrerPolicy=e),typeof n=="string"&&(s.crossOrigin=n),()=>{s.removeEventListener("load",c),s.removeEventListener("error",u)}},[s,n,e]),o}var Ri=Ci,ji=Ai,Li=Ii;const $i=W.forwardRef(({className:t,...e},n)=>R.jsx(Ri,{ref:n,className:lt("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));$i.displayName=Ri.displayName;const Di=W.forwardRef(({className:t,...e},n)=>R.jsx(ji,{ref:n,className:lt("aspect-square h-full w-full",t),...e}));Di.displayName=ji.displayName;const Ni=W.forwardRef(({className:t,...e},n)=>R.jsx(Li,{ref:n,className:lt("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));Ni.displayName=Li.displayName;/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Mi=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cl={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=le.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>le.createElement("svg",{ref:l,...cl,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Mi("lucide",i),...a},[...o.map(([c,u])=>le.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=(t,e)=>{const n=le.forwardRef(({className:r,...i},s)=>le.createElement(hl,{ref:s,iconNode:e,className:Mi(`lucide-${ul(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=zi("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dl=zi("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),fl=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Promise.resolve().then(()=>St).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Kn extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class pl extends Kn{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class gl extends Kn{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ml extends Kn{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Jn;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Jn||(Jn={}));var yl=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class bl{constructor(e,{headers:n={},customFetch:r,region:i=Jn.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=fl(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return yl(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:c}).catch(y=>{throw new pl(y)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new gl(u);if(!u.ok)throw new ml(u);let f=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),d;return f==="application/json"?d=yield u.json():f==="application/octet-stream"?d=yield u.blob():f==="text/event-stream"?d=u:f==="multipart/form-data"?d=yield u.formData():d=yield u.text(),{data:d,error:null}}catch(i){return{data:null,error:i}}})}}var xe={},Yn={},un={},qt={},cn={},hn={},vl=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},kt=vl();const wl=kt.fetch,Ui=kt.fetch.bind(kt),Bi=kt.Headers,_l=kt.Request,xl=kt.Response,St=Object.freeze(Object.defineProperty({__proto__:null,Headers:Bi,Request:_l,Response:xl,default:Ui,fetch:wl},Symbol.toStringTag,{value:"Module"})),kl=la(St);var dn={};Object.defineProperty(dn,"__esModule",{value:!0});let Sl=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};dn.default=Sl;var qi=ye&&ye.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hn,"__esModule",{value:!0});const El=qi(kl),Cl=qi(dn);let Tl=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=El.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,a,l;let c=null,u=null,h=null,f=s.status,d=s.statusText;if(s.ok){if(this.method!=="HEAD"){const v=await s.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=v:u=JSON.parse(v))}const b=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),w=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");b&&w&&w.length>1&&(h=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,d="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const b=await s.text();try{c=JSON.parse(b),Array.isArray(c)&&s.status===404&&(u=[],c=null,f=200,d="OK")}catch{s.status===404&&b===""?(f=204,d="No Content"):c={message:b}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,f=200,d="OK"),c&&this.shouldThrowOnError)throw new Cl.default(c)}return{error:c,data:u,count:h,status:f,statusText:d}});return this.shouldThrowOnError||(i=i.catch(s=>{var o,a,l;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(a=s==null?void 0:s.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,n)}returns(){return this}overrideTypes(){return this}};hn.default=Tl;var Al=ye&&ye.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(cn,"__esModule",{value:!0});const Pl=Al(hn);let Il=class extends Pl.default{select(e){let n=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};cn.default=Il;var Ol=ye&&ye.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qt,"__esModule",{value:!0});const Rl=Ol(cn);let jl=class extends Rl.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};qt.default=jl;var Ll=ye&&ye.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(un,"__esModule",{value:!0});const Vt=Ll(qt);let $l=class{constructor(e,{headers:n={},schema:r,fetch:i}){this.url=e,this.headers=n,this.schema=r,this.fetch=i}select(e,{head:n=!1,count:r}={}){const i=n?"HEAD":"GET";let s=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Vt.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Vt.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Vt.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),this.headers.Prefer=i.join(","),new Vt.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Vt.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};un.default=$l;var fn={},pn={};Object.defineProperty(pn,"__esModule",{value:!0}),pn.version=void 0,pn.version="0.0.0-automated",Object.defineProperty(fn,"__esModule",{value:!0}),fn.DEFAULT_HEADERS=void 0;const Dl=pn;fn.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Dl.version}`};var Vi=ye&&ye.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Yn,"__esModule",{value:!0});const Nl=Vi(un),Ml=Vi(qt),zl=fn;let Fl=class oa{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},zl.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=i}from(e){const n=new URL(`${this.url}/${e}`);return new Nl.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new oa(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:s}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;r||i?(o=r?"HEAD":"GET",Object.entries(n).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{a.searchParams.append(u,h)})):(o="POST",l=n);const c=Object.assign({},this.headers);return s&&(c.Prefer=`count=${s}`),new Ml.default({method:o,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Yn.default=Fl;var Et=ye&&ye.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xe,"__esModule",{value:!0}),xe.PostgrestError=xe.PostgrestBuilder=xe.PostgrestTransformBuilder=xe.PostgrestFilterBuilder=xe.PostgrestQueryBuilder=xe.PostgrestClient=void 0;const Hi=Et(Yn);xe.PostgrestClient=Hi.default;const Wi=Et(un);xe.PostgrestQueryBuilder=Wi.default;const Gi=Et(qt);xe.PostgrestFilterBuilder=Gi.default;const Ki=Et(cn);xe.PostgrestTransformBuilder=Ki.default;const Ji=Et(hn);xe.PostgrestBuilder=Ji.default;const Yi=Et(dn);xe.PostgrestError=Yi.default;var Ul=xe.default={PostgrestClient:Hi.default,PostgrestQueryBuilder:Wi.default,PostgrestFilterBuilder:Gi.default,PostgrestTransformBuilder:Ki.default,PostgrestBuilder:Ji.default,PostgrestError:Yi.default};const{PostgrestClient:Bl,PostgrestQueryBuilder:pg,PostgrestFilterBuilder:gg,PostgrestTransformBuilder:mg,PostgrestBuilder:yg,PostgrestError:bg}=Ul;function ql(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Vl=ql(),Hl="realtime-js/2.11.15",Wl="1.0.0",Xi=1e4,Gl=1e3;var Ht;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ht||(Ht={}));var be;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(be||(be={}));var Ne;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ne||(Ne={}));var Xn;(function(t){t.websocket="websocket"})(Xn||(Xn={}));var ut;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ut||(ut={}));class Kl{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+s));o=o+s;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class Qi{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var re;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(re||(re={}));const Zi=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,o)=>(s[o]=Jl(o,t,e,i),s),{})},Jl=(t,e,n,r)=>{const i=e.find(a=>a.name===t),s=i==null?void 0:i.type,o=n[t];return s&&!r.includes(s)?es(s,o):Qn(o)},es=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Zl(e,n)}switch(t){case re.bool:return Yl(e);case re.float4:case re.float8:case re.int2:case re.int4:case re.int8:case re.numeric:case re.oid:return Xl(e);case re.json:case re.jsonb:return Ql(e);case re.timestamp:return eu(e);case re.abstime:case re.date:case re.daterange:case re.int4range:case re.int8range:case re.money:case re.reltime:case re.text:case re.time:case re.timestamptz:case re.timetz:case re.tsrange:case re.tstzrange:return Qn(e);default:return Qn(e)}},Qn=t=>t,Yl=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Xl=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Ql=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Zl=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const o=t.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>es(e,a))}return t},eu=t=>typeof t=="string"?t.replace(" ","T"):t,ts=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Zn{constructor(e,n,r={},i=Xi){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ns;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(ns||(ns={}));class Wt{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Wt.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=Wt.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Wt.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(s,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const h=s[c];if(h){const f=u.map(w=>w.presence_ref),d=h.map(w=>w.presence_ref),y=u.filter(w=>d.indexOf(w.presence_ref)<0),b=h.filter(w=>f.indexOf(w.presence_ref)<0);y.length>0&&(a[c]=y),b.length>0&&(l[c]=b)}else a[c]=u}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const h=e[a].map(d=>d.presence_ref),f=u.filter(d=>h.indexOf(d.presence_ref)<0);e[a].unshift(...f)}r(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var rs;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(rs||(rs={}));var is;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(is||(is={}));var We;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(We||(We={}));class er{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=be.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Zn(this,Ne.join,this.params,this.timeout),this.rejoinTimer=new Qi(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=be.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=be.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=be.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=be.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ne.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Wt(this),this.broadcastEndpointURL=ts(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.state==be.closed){const{config:{broadcast:s,presence:o,private:a}}=this.params;this._onError(u=>e==null?void 0:e(We.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(We.CLOSED));const l={},c={broadcast:s,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){e==null||e(We.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,d=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,y=[];for(let b=0;b<d;b++){const w=f[b],{filter:{event:v,schema:C,table:k,filter:I}}=w,$=u&&u[b];if($&&$.event===v&&$.schema===C&&$.table===k&&$.filter===I)y.push(Object.assign(Object.assign({},w),{id:$.id}));else{this.unsubscribe(),this.state=be.errored,e==null||e(We.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(We.SUBSCRIBED);return}}).receive("error",u=>{this.state=be.errored,e==null||e(We.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(We.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=be.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ne.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Zn(this,Ne.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Zn(this,e,n,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Ne;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(d=>{var y,b,w;return((y=d.filter)===null||y===void 0?void 0:y.event)==="*"||((w=(b=d.filter)===null||b===void 0?void 0:b.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(d=>d.callback(f,r)):(s=this.bindings[o])===null||s===void 0||s.filter(d=>{var y,b,w,v,C,k;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in d){const I=d.id,$=(y=d.filter)===null||y===void 0?void 0:y.event;return I&&((b=n.ids)===null||b===void 0?void 0:b.includes(I))&&($==="*"||($==null?void 0:$.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const I=(C=(v=d==null?void 0:d.filter)===null||v===void 0?void 0:v.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return I==="*"||I===((k=n==null?void 0:n.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return d.type.toLocaleLowerCase()===o}).map(d=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:b,table:w,commit_timestamp:v,type:C,errors:k}=y;f=Object.assign(Object.assign({},{schema:b,table:w,commit_timestamp:v,eventType:C,new:{},old:{},errors:k}),this._getPayloadRecords(y))}d.callback(f,r)})}_isClosed(){return this.state===be.closed}_isJoined(){return this.state===be.joined}_isJoining(){return this.state===be.joining}_isLeaving(){return this.state===be.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&er.isEqual(i.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ne.close,{},e)}_onError(e){this._on(Ne.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=be.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Zi(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Zi(e.columns,e.old_record)),n}}const ss=()=>{},tu=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class nu{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Xi,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ss,this.ref=0,this.logger=ss,this.conn=null,this.sendBuffer=[],this.serializer=new Kl,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>Promise.resolve().then(()=>St).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${Xn.websocket}`,this.httpEndpoint=ts(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const i=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(s,o)=>o(JSON.stringify(s)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Qi(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Vl),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Wl}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ht.connecting:return ut.Connecting;case Ht.open:return ut.Open;case Ht.closing:return ut.Closing;default:return ut.Closed}}isConnected(){return this.connectionState()===ut.Open}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new er(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:Hl};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Ne.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Gl,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:i,payload:s,ref:o}=n;r==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,s),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ne.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([tu],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class tr extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ge(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class ru extends tr{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class nr extends tr{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var iu=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const os=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Promise.resolve().then(()=>St).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},su=()=>iu(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Promise.resolve().then(()=>St)).Response:Response}),rr=t=>{if(Array.isArray(t))return t.map(n=>rr(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=rr(r)}),e};var ct=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const ir=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),ou=(t,e,n)=>ct(void 0,void 0,void 0,function*(){const r=yield su();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{e(new ru(ir(i),t.status||500))}).catch(i=>{e(new nr(ir(i),i))}):e(new nr(ir(t),t))}),au=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),n))};function Gt(t,e,n,r,i,s){return ct(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,au(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>ou(l,a,r))})})}function gn(t,e,n,r){return ct(this,void 0,void 0,function*(){return Gt(t,"GET",e,n,r)})}function et(t,e,n,r,i){return ct(this,void 0,void 0,function*(){return Gt(t,"POST",e,r,i,n)})}function lu(t,e,n,r,i){return ct(this,void 0,void 0,function*(){return Gt(t,"PUT",e,r,i,n)})}function uu(t,e,n,r){return ct(this,void 0,void 0,function*(){return Gt(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function as(t,e,n,r,i){return ct(this,void 0,void 0,function*(){return Gt(t,"DELETE",e,r,i,n)})}var ke=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const cu={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ls={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class hu{constructor(e,n={},r,i){this.url=e,this.headers=n,this.bucketId=r,this.fetch=os(i)}uploadOrUpdate(e,n,r,i){return ke(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},ls),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:s,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield h.json();return h.ok?{data:{path:c,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(s){if(ge(s))return{data:null,error:s};throw s}})}upload(e,n,r){return ke(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return ke(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:ls.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),f=yield h.json();return h.ok?{data:{path:s,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(ge(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return ke(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield et(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new tr("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}})}update(e,n,r){return ke(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return ke(this,void 0,void 0,function*(){try{return{data:yield et(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(ge(i))return{data:null,error:i};throw i}})}copy(e,n,r){return ke(this,void 0,void 0,function*(){try{return{data:{path:(yield et(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(ge(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return ke(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield et(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(ge(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return ke(this,void 0,void 0,function*(){try{const i=yield et(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(ge(i))return{data:null,error:i};throw i}})}download(e,n){return ke(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield gn(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(ge(a))return{data:null,error:a};throw a}})}info(e){return ke(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield gn(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:rr(r),error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}})}exists(e){return ke(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield uu(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(ge(r)&&r instanceof nr){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return ke(this,void 0,void 0,function*(){try{return{data:yield as(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}})}list(e,n,r){return ke(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},cu),n),{prefix:e||""});return{data:yield et(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(ge(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const du={"X-Client-Info":"storage-js/2.7.1"};var Ct=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class fu{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},du),n),this.fetch=os(r)}listBuckets(){return Ct(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ge(e))return{data:null,error:e};throw e}})}getBucket(e){return Ct(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Ct(this,void 0,void 0,function*(){try{return{data:yield et(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Ct(this,void 0,void 0,function*(){try{return{data:yield lu(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ct(this,void 0,void 0,function*(){try{return{data:yield et(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Ct(this,void 0,void 0,function*(){try{return{data:yield as(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}})}}class pu extends fu{constructor(e,n={},r){super(e,n,r)}from(e){return new hu(this.url,this.headers,e,this.fetch)}}const gu="2.50.2";let Kt="";typeof Deno<"u"?Kt="deno":typeof document<"u"?Kt="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Kt="react-native":Kt="node";const mu={headers:{"X-Client-Info":`supabase-js-${Kt}/${gu}`}},yu={schema:"public"},bu={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},vu={};var wu=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const _u=t=>{let e;return t?e=t:typeof fetch>"u"?e=Ui:e=fetch,(...n)=>e(...n)},xu=()=>typeof Headers>"u"?Bi:Headers,ku=(t,e,n)=>{const r=_u(n),i=xu();return(s,o)=>wu(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:c}))})};var Su=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};function Eu(t){return t.endsWith("/")?t:t+"/"}function Cu(t,e){var n,r;const{db:i,auth:s,realtime:o,global:a}=t,{db:l,auth:c,realtime:u,global:h}=e,f={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Su(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}const us="2.70.0",Tt=30*1e3,sr=3,or=sr*Tt,Tu="http://localhost:9999",Au="supabase.auth.token",Pu={"X-Client-Info":`gotrue-js/${us}`},ar="X-Supabase-Api-Version",cs={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Iu=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ou=6e5;class lr extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function q(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Ru extends lr{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function ju(t){return q(t)&&t.name==="AuthApiError"}class hs extends lr{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class tt extends lr{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class nt extends tt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Lu(t){return q(t)&&t.name==="AuthSessionMissingError"}class mn extends tt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class yn extends tt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class bn extends tt{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function $u(t){return q(t)&&t.name==="AuthImplicitGrantRedirectError"}class ds extends tt{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ur extends tt{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function cr(t){return q(t)&&t.name==="AuthRetryableFetchError"}class fs extends tt{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Jt extends tt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const vn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ps=` 	
\r=`.split(""),Du=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<ps.length;e+=1)t[ps[e].charCodeAt(0)]=-2;for(let e=0;e<vn.length;e+=1)t[vn[e].charCodeAt(0)]=e;return t})();function gs(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(vn[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(vn[r]),e.queuedBits-=6}}function ms(t,e,n){const r=Du[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function ys(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{zu(o,r,n)};for(let o=0;o<t.length;o+=1)ms(t.charCodeAt(o),i,s);return e.join("")}function Nu(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Mu(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}Nu(r,e)}}function zu(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Fu(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)ms(t.charCodeAt(i),n,r);return new Uint8Array(e)}function Uu(t){const e=[];return Mu(t,n=>e.push(n)),new Uint8Array(e)}function Bu(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>gs(i,n,r)),gs(null,n,r),e.join("")}function qu(t){return Math.round(Date.now()/1e3)+t}function Vu(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Me=()=>typeof window<"u"&&typeof document<"u",ht={tested:!1,writable:!1},Yt=()=>{if(!Me())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ht.tested)return ht.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ht.tested=!0,ht.writable=!0}catch{ht.tested=!0,ht.writable=!1}return ht.writable};function Hu(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const bs=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Promise.resolve().then(()=>St).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Wu=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",vs=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},wn=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},_n=async(t,e)=>{await t.removeItem(e)};class xn{constructor(){this.promise=new xn.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}xn.promiseConstructor=Promise;function hr(t){const e=t.split(".");if(e.length!==3)throw new Jt("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Iu.test(e[r]))throw new Jt("JWT not in base64url format");return{header:JSON.parse(ys(e[0])),payload:JSON.parse(ys(e[1])),signature:Fu(e[2]),raw:{header:e[0],payload:e[1]}}}async function Gu(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Ku(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function Ju(t){return("0"+t.toString(16)).substr(-2)}function Yu(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,Ju).join("")}async function Xu(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function Qu(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Xu(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function At(t,e,n=!1){const r=Yu();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await vs(t,`${e}-code-verifier`,i);const s=await Qu(r);return[s,r===s?"plain":"s256"]}const Zu=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ec(t){const e=t.headers.get(ar);if(!e||!e.match(Zu))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function tc(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function nc(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const rc=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Pt(t){if(!rc.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var ic=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const dt=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),sc=[502,503,504];async function ws(t){var e;if(!Wu(t))throw new ur(dt(t),0);if(sc.includes(t.status))throw new ur(dt(t),t.status);let n;try{n=await t.json()}catch(s){throw new hs(dt(s),s)}let r;const i=ec(t);if(i&&i.getTime()>=cs["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new fs(dt(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new nt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new fs(dt(n),t.status,n.weak_password.reasons);throw new Ru(dt(n),t.status||500,r)}const oc=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function J(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[ar]||(s[ar]=cs["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await ac(t,e,n+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function ac(t,e,n,r,i,s){const o=oc(e,r,i,s);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new ur(dt(l),0)}if(a.ok||await ws(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await ws(l)}}function Ge(t){var e;let n=null;hc(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=qu(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function _s(t){const e=Ge(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function rt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function lc(t){return{data:t,error:null}}function uc(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,o=ic(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function cc(t){return t}function hc(t){return t.access_token&&t.refresh_token&&t.expires_in}const dr=["global","local","others"];var dc=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class fc{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=bs(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=dr[0]){if(dr.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${dr.join(", ")}`);try{return await J(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(q(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await J(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:rt})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=dc(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await J(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:uc,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(q(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await J(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:rt})}catch(n){if(q(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await J(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:cc});if(u.error)throw u.error;const h=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,d=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return d.length>0&&(d.forEach(y=>{const b=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(y.split(";")[1].split("=")[1]);c[`${w}Page`]=b}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(q(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Pt(e);try{return await J(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:rt})}catch(n){if(q(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Pt(e);try{return await J(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:rt})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Pt(e);try{return await J(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:rt})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Pt(e.userId);try{const{data:n,error:r}=await J(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(q(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Pt(e.userId),Pt(e.id);try{return{data:await J(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(q(n))return{data:null,error:n};throw n}}}const pc={getItem:t=>Yt()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Yt()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Yt()&&globalThis.localStorage.removeItem(t)}};function xs(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function gc(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const It={debug:!!(globalThis&&Yt()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ks extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class mc extends ks{}async function yc(t,e,n){It.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),It.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){It.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{It.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw It.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new mc(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(It.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}gc();const bc={url:Tu,storageKey:Au,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Pu,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ss(t,e,n){return await n()}class Xt{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Xt.nextInstanceID,Xt.nextInstanceID+=1,this.instanceID>0&&Me()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},bc),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new fc({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=bs(i.fetch),this.lock=i.lock||Ss,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Me()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=yc:this.lock=Ss,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:Yt()?this.storage=pc:(this.memoryStorage={},this.storage=xs(this.memoryStorage)):(this.memoryStorage={},this.storage=xs(this.memoryStorage)),Me()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${us}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=Hu(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Me()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),$u(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return q(n)?{error:n}:{error:new hs("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await J(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Ge}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(q(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:u,password:h,options:f}=e;let d=null,y=null;this.flowType==="pkce"&&([d,y]=await At(this.storage,this.storageKey)),s=await J(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:d,code_challenge_method:y},xform:Ge})}else if("phone"in e){const{phone:u,password:h,options:f}=e;s=await J(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Ge})}else throw new yn("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(q(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:o,options:a}=e;n=await J(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:_s})}else if("phone"in e){const{phone:s,password:o,options:a}=e;n=await J(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:_s})}else throw new yn("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new mn}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(q(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,i,s,o,a,l,c,u,h,f,d;let y,b;if("message"in e)y=e.message,b=e.signature;else{const{chain:w,wallet:v,statement:C,options:k}=e;let I;if(Me())if(typeof v=="object")I=v;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))I=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=v}const $=new URL((n=k==null?void 0:k.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in I&&I.signIn){const _=await I.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k==null?void 0:k.signInWithSolana),{version:"1",domain:$.host,uri:$.href}),C?{statement:C}:null));let D;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")D=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)D=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)y=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),b=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in I)||typeof I.signMessage!="function"||!("publicKey"in I)||typeof I!="object"||!I.publicKey||!("toBase58"in I.publicKey)||typeof I.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${$.host} wants you to sign in with your Solana account:`,I.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${$.href}`,`Issued At: ${(i=(r=k==null?void 0:k.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=k==null?void 0:k.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((o=k==null?void 0:k.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((a=k==null?void 0:k.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((l=k==null?void 0:k.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((c=k==null?void 0:k.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((h=(u=k==null?void 0:k.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...k.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const _=await I.signMessage(new TextEncoder().encode(y),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=_}}try{const{data:w,error:v}=await J(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:Bu(b)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(d=e.options)===null||d===void 0?void 0:d.captchaToken}}:null),xform:Ge});if(v)throw v;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new mn}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:v})}catch(w){if(q(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(e){const n=await wn(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:o}=await J(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Ge});if(await _n(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new mn}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(q(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:o}=e,a=await J(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ge}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new mn}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(q(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await At(this.storage,this.storageKey));const{error:h}=await J(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await J(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new yn("You must provide either an email or phone number.")}catch(a){if(q(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await J(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Ge});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(q(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var n,r,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await At(this.storage,this.storageKey)),await J(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:lc})}catch(s){if(q(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new nt;const{error:i}=await J(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(q(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await J(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await J(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new yn("You must provide either an email or phone number and a type")}catch(n){if(q(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await wn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<or:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await J(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:rt}):await this._useSession(async n=>{var r,i,s;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new nt}:await J(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:rt})})}catch(n){if(q(n))return Lu(n)&&(await this._removeSession(),await _n(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new nt;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await At(this.storage,this.storageKey));const{data:c,error:u}=await J(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:rt});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new nt;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:o}=hr(e.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(q(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new nt;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(q(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Me())throw new bn("No browser detected.");if(e.error||e.error_description||e.error_code)throw new bn(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new ds("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new bn("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ds("No code detected.");const{data:C,error:k}=await this._exchangeCodeForSession(e.code);if(k)throw k;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!s||!a||!o||!c)throw new bn("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let f=u+h;l&&(f=parseInt(l));const d=f-u;d*1e3<=Tt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${d}s, should have been closer to ${h}s`);const y=f-h;u-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,u):u-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,u);const{data:b,error:w}=await this._getUser(s);if(w)throw w;const v={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:h,expires_at:f,refresh_token:o,token_type:c,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:e.type},error:null}}catch(r){if(q(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await wn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(ju(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await _n(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=Vu(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await At(this.storage,this.storageKey,!0));try{return await J(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(q(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(q(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,c,u;const{data:h,error:f}=s;if(f)throw f;const d=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await J(this.fetch,"GET",d,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return Me()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(q(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)throw o;return await J(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(q(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Ku(async i=>(i>0&&await Gu(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await J(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ge})),(i,s)=>{const o=200*Math.pow(2,i);return s&&cr(s)&&Date.now()+o-r<Tt})}catch(r){if(this._debug(n,"error",r),q(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Me()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await wn(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<or;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${or}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:s}=await this._callRefreshToken(r.refresh_token);s&&(console.error(s),cr(s)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new nt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new xn;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new nt;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),q(s)){const o={session:null,error:s};return cr(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await vs(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await _n(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Me()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Tt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Tt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Tt}ms, refresh threshold is ${sr} ticks`),i<=sr&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ks)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Me()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await At(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await J(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(q(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await J(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(q(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const{data:o,error:a}=await J(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(q(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await J(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(q(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],i=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=hr(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+Ou>Date.now()))return r;const{data:i,error:s}=await J(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;if(!i.keys||i.keys.length===0)throw new Jt("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),r=i.keys.find(o=>o.kid===e),!r)throw new Jt("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:d,error:y}=await this.getSession();if(y||!d.session)return{data:null,error:y};r=d.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=hr(r);if(tc(s.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:d}=await this.getUser(r);if(d)throw d;return{data:{claims:s,header:i,signature:o},error:null}}const c=nc(i.alg),u=await this.fetchJwk(i.kid,n),h=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,o,Uu(`${a}.${l}`)))throw new Jt("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(q(r))return{data:null,error:r};throw r}}}Xt.nextInstanceID=0;const vc=Xt;class wc extends vc{constructor(e){super(e)}}var _c=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class xc{constructor(e,n,r){var i,s,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=Eu(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:yu,realtime:vu,auth:Object.assign(Object.assign({},bu),{storageKey:c}),global:mu},h=Cu(r??{},u);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=h.global.headers)!==null&&s!==void 0?s:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=ku(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Bl(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new bl(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new pu(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return _c(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,storageKey:s,flowType:o,lock:a,debug:l},c,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new wc({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),c),storageKey:s,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new nu(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const kc=((t,e,n)=>new xc(t,e,n))("https://hgqndkfkuitafuzawuxl.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhncW5ka2ZrdWl0YWZ1emF3dXhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc5MzQ4OTIsImV4cCI6MjA2MzUxMDg5Mn0.Yixc4Pw9w3NDtxx5WTuU1YAtbN5gh60a6WQzGKKOFjY");function Eg(){}function Cg(){}function Sc(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const Ec=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Cc=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Tc={};function Es(t,e){return(Tc.jsx?Cc:Ec).test(t)}const Ac=/[ \t\n\f\r]/g;function Pc(t){return typeof t=="object"?t.type==="text"?Cs(t.value):!1:Cs(t)}function Cs(t){return t.replace(Ac,"")===""}class Qt{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}Qt.prototype.normal={},Qt.prototype.property={},Qt.prototype.space=void 0;function Ts(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new Qt(n,r,e)}function fr(t){return t.toLowerCase()}class Se{constructor(e,n){this.attribute=n,this.property=e}}Se.prototype.attribute="",Se.prototype.booleanish=!1,Se.prototype.boolean=!1,Se.prototype.commaOrSpaceSeparated=!1,Se.prototype.commaSeparated=!1,Se.prototype.defined=!1,Se.prototype.mustUseProperty=!1,Se.prototype.number=!1,Se.prototype.overloadedBoolean=!1,Se.prototype.property="",Se.prototype.spaceSeparated=!1,Se.prototype.space=void 0;let Ic=0;const H=ft(),de=ft(),pr=ft(),E=ft(),ie=ft(),Ot=ft(),Ae=ft();function ft(){return 2**++Ic}const gr=Object.freeze(Object.defineProperty({__proto__:null,boolean:H,booleanish:de,commaOrSpaceSeparated:Ae,commaSeparated:Ot,number:E,overloadedBoolean:pr,spaceSeparated:ie},Symbol.toStringTag,{value:"Module"})),mr=Object.keys(gr);class yr extends Se{constructor(e,n,r,i){let s=-1;if(super(e,n),As(this,"space",i),typeof r=="number")for(;++s<mr.length;){const o=mr[s];As(this,mr[s],(r&gr[o])===gr[o])}}}yr.prototype.defined=!0;function As(t,e,n){n&&(t[e]=n)}function Rt(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new yr(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[fr(r)]=r,n[fr(s.attribute)]=r}return new Qt(e,n,t.space)}const Ps=Rt({properties:{ariaActiveDescendant:null,ariaAtomic:de,ariaAutoComplete:null,ariaBusy:de,ariaChecked:de,ariaColCount:E,ariaColIndex:E,ariaColSpan:E,ariaControls:ie,ariaCurrent:null,ariaDescribedBy:ie,ariaDetails:null,ariaDisabled:de,ariaDropEffect:ie,ariaErrorMessage:null,ariaExpanded:de,ariaFlowTo:ie,ariaGrabbed:de,ariaHasPopup:null,ariaHidden:de,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ie,ariaLevel:E,ariaLive:null,ariaModal:de,ariaMultiLine:de,ariaMultiSelectable:de,ariaOrientation:null,ariaOwns:ie,ariaPlaceholder:null,ariaPosInSet:E,ariaPressed:de,ariaReadOnly:de,ariaRelevant:null,ariaRequired:de,ariaRoleDescription:ie,ariaRowCount:E,ariaRowIndex:E,ariaRowSpan:E,ariaSelected:de,ariaSetSize:E,ariaSort:null,ariaValueMax:E,ariaValueMin:E,ariaValueNow:E,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function Is(t,e){return e in t?t[e]:e}function Os(t,e){return Is(t,e.toLowerCase())}const Oc=Rt({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Ot,acceptCharset:ie,accessKey:ie,action:null,allow:null,allowFullScreen:H,allowPaymentRequest:H,allowUserMedia:H,alt:null,as:null,async:H,autoCapitalize:null,autoComplete:ie,autoFocus:H,autoPlay:H,blocking:ie,capture:null,charSet:null,checked:H,cite:null,className:ie,cols:E,colSpan:null,content:null,contentEditable:de,controls:H,controlsList:ie,coords:E|Ot,crossOrigin:null,data:null,dateTime:null,decoding:null,default:H,defer:H,dir:null,dirName:null,disabled:H,download:pr,draggable:de,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:H,formTarget:null,headers:ie,height:E,hidden:pr,high:E,href:null,hrefLang:null,htmlFor:ie,httpEquiv:ie,id:null,imageSizes:null,imageSrcSet:null,inert:H,inputMode:null,integrity:null,is:null,isMap:H,itemId:null,itemProp:ie,itemRef:ie,itemScope:H,itemType:ie,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:H,low:E,manifest:null,max:null,maxLength:E,media:null,method:null,min:null,minLength:E,multiple:H,muted:H,name:null,nonce:null,noModule:H,noValidate:H,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:H,optimum:E,pattern:null,ping:ie,placeholder:null,playsInline:H,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:H,referrerPolicy:null,rel:ie,required:H,reversed:H,rows:E,rowSpan:E,sandbox:ie,scope:null,scoped:H,seamless:H,selected:H,shadowRootClonable:H,shadowRootDelegatesFocus:H,shadowRootMode:null,shape:null,size:E,sizes:null,slot:null,span:E,spellCheck:de,src:null,srcDoc:null,srcLang:null,srcSet:null,start:E,step:null,style:null,tabIndex:E,target:null,title:null,translate:null,type:null,typeMustMatch:H,useMap:null,value:de,width:E,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ie,axis:null,background:null,bgColor:null,border:E,borderColor:null,bottomMargin:E,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:H,declare:H,event:null,face:null,frame:null,frameBorder:null,hSpace:E,leftMargin:E,link:null,longDesc:null,lowSrc:null,marginHeight:E,marginWidth:E,noResize:H,noHref:H,noShade:H,noWrap:H,object:null,profile:null,prompt:null,rev:null,rightMargin:E,rules:null,scheme:null,scrolling:de,standby:null,summary:null,text:null,topMargin:E,valueType:null,version:null,vAlign:null,vLink:null,vSpace:E,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:H,disableRemotePlayback:H,prefix:null,property:null,results:E,security:null,unselectable:null},space:"html",transform:Os}),Rc=Rt({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Ae,accentHeight:E,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:E,amplitude:E,arabicForm:null,ascent:E,attributeName:null,attributeType:null,azimuth:E,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:E,by:null,calcMode:null,capHeight:E,className:ie,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:E,diffuseConstant:E,direction:null,display:null,dur:null,divisor:E,dominantBaseline:null,download:H,dx:null,dy:null,edgeMode:null,editable:null,elevation:E,enableBackground:null,end:null,event:null,exponent:E,externalResourcesRequired:null,fill:null,fillOpacity:E,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Ot,g2:Ot,glyphName:Ot,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:E,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:E,horizOriginX:E,horizOriginY:E,id:null,ideographic:E,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:E,k:E,k1:E,k2:E,k3:E,k4:E,kernelMatrix:Ae,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:E,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:E,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:E,overlineThickness:E,paintOrder:null,panose1:null,path:null,pathLength:E,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ie,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:E,pointsAtY:E,pointsAtZ:E,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ae,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ae,rev:Ae,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ae,requiredFeatures:Ae,requiredFonts:Ae,requiredFormats:Ae,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:E,specularExponent:E,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:E,strikethroughThickness:E,string:null,stroke:null,strokeDashArray:Ae,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:E,strokeOpacity:E,strokeWidth:null,style:null,surfaceScale:E,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ae,tabIndex:E,tableValues:null,target:null,targetX:E,targetY:E,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ae,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:E,underlineThickness:E,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:E,values:null,vAlphabetic:E,vMathematical:E,vectorEffect:null,vHanging:E,vIdeographic:E,version:null,vertAdvY:E,vertOriginX:E,vertOriginY:E,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:E,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Is}),Rs=Rt({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),js=Rt({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Os}),Ls=Rt({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),jc={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Lc=/[A-Z]/g,$s=/-[a-z]/g,$c=/^data[-\w.:]+$/i;function Dc(t,e){const n=fr(e);let r=e,i=Se;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&$c.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace($s,Mc);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!$s.test(s)){let o=s.replace(Lc,Nc);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=yr}return new i(r,e)}function Nc(t){return"-"+t.toLowerCase()}function Mc(t){return t.charAt(1).toUpperCase()}const zc=Ts([Ps,Oc,Rs,js,Ls],"html"),br=Ts([Ps,Rc,Rs,js,Ls],"svg");function Fc(t){return t.join(" ").trim()}var vr={},Ds=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,Uc=/\n/g,Bc=/^\s*/,qc=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Vc=/^:\s*/,Hc=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Wc=/^[;\s]*/,Gc=/^\s+|\s+$/g,Kc=`
`,Ns="/",Ms="*",pt="",Jc="comment",Yc="declaration",Xc=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,r=1;function i(y){var b=y.match(Uc);b&&(n+=b.length);var w=y.lastIndexOf(Kc);r=~w?y.length-w:r+y.length}function s(){var y={line:n,column:r};return function(b){return b.position=new o(y),c(),b}}function o(y){this.start=y,this.end={line:n,column:r},this.source=e.source}o.prototype.content=t;function a(y){var b=new Error(e.source+":"+n+":"+r+": "+y);if(b.reason=y,b.filename=e.source,b.line=n,b.column=r,b.source=t,!e.silent)throw b}function l(y){var b=y.exec(t);if(b){var w=b[0];return i(w),t=t.slice(w.length),b}}function c(){l(Bc)}function u(y){var b;for(y=y||[];b=h();)b!==!1&&y.push(b);return y}function h(){var y=s();if(!(Ns!=t.charAt(0)||Ms!=t.charAt(1))){for(var b=2;pt!=t.charAt(b)&&(Ms!=t.charAt(b)||Ns!=t.charAt(b+1));)++b;if(b+=2,pt===t.charAt(b-1))return a("End of comment missing");var w=t.slice(2,b-2);return r+=2,i(w),t=t.slice(b),r+=2,y({type:Jc,comment:w})}}function f(){var y=s(),b=l(qc);if(b){if(h(),!l(Vc))return a("property missing ':'");var w=l(Hc),v=y({type:Yc,property:zs(b[0].replace(Ds,pt)),value:w?zs(w[0].replace(Ds,pt)):pt});return l(Wc),v}}function d(){var y=[];u(y);for(var b;b=f();)b!==!1&&(y.push(b),u(y));return y}return c(),d()};function zs(t){return t?t.replace(Gc,pt):pt}var Qc=ye&&ye.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vr,"__esModule",{value:!0}),vr.default=eh;var Zc=Qc(Xc);function eh(t,e){var n=null;if(!t||typeof t!="string")return n;var r=(0,Zc.default)(t),i=typeof e=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?e(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var kn={};Object.defineProperty(kn,"__esModule",{value:!0}),kn.camelCase=void 0;var th=/^--[a-zA-Z0-9_-]+$/,nh=/-([a-z])/g,rh=/^[^-]+$/,ih=/^-(webkit|moz|ms|o|khtml)-/,sh=/^-(ms)-/,oh=function(t){return!t||rh.test(t)||th.test(t)},ah=function(t,e){return e.toUpperCase()},Fs=function(t,e){return"".concat(e,"-")},lh=function(t,e){return e===void 0&&(e={}),oh(t)?t:(t=t.toLowerCase(),e.reactCompat?t=t.replace(sh,Fs):t=t.replace(ih,Fs),t.replace(nh,ah))};kn.camelCase=lh;var uh=ye&&ye.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},ch=uh(vr),hh=kn;function wr(t,e){var n={};return!t||typeof t!="string"||(0,ch.default)(t,function(r,i){r&&i&&(n[(0,hh.camelCase)(r,e)]=i)}),n}wr.default=wr;var dh=wr;const fh=ii(dh),Us=Bs("end"),_r=Bs("start");function Bs(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function ph(t){const e=_r(t),n=Us(t);if(e&&n)return{start:e,end:n}}function Zt(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?qs(t.position):"start"in t||"end"in t?qs(t):"line"in t||"column"in t?xr(t):""}function xr(t){return Vs(t&&t.line)+":"+Vs(t&&t.column)}function qs(t){return xr(t&&t.start)+"-"+xr(t&&t.end)}function Vs(t){return t&&typeof t=="number"?t:1}class ve extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=Zt(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}ve.prototype.file="",ve.prototype.name="",ve.prototype.reason="",ve.prototype.message="",ve.prototype.stack="",ve.prototype.column=void 0,ve.prototype.line=void 0,ve.prototype.ancestors=void 0,ve.prototype.cause=void 0,ve.prototype.fatal=void 0,ve.prototype.place=void 0,ve.prototype.ruleId=void 0,ve.prototype.source=void 0;const kr={}.hasOwnProperty,gh=new Map,mh=/[A-Z]/g,yh=new Set(["table","tbody","thead","tfoot","tr"]),bh=new Set(["td","th"]),Hs="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function vh(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Th(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Ch(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?br:zc,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=Ws(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function Ws(t,e,n){if(e.type==="element")return wh(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return _h(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return kh(t,e,n);if(e.type==="mdxjsEsm")return xh(t,e);if(e.type==="root")return Sh(t,e,n);if(e.type==="text")return Eh(t,e)}function wh(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=br,t.schema=i),t.ancestors.push(e);const s=Ks(t,e.tagName,!1),o=Ah(t,e);let a=Er(t,e);return yh.has(e.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!Pc(l):!0})),Gs(t,o,s,e),Sr(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function _h(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}en(t,e.position)}function xh(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);en(t,e.position)}function kh(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=br,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:Ks(t,e.name,!0),o=Ph(t,e),a=Er(t,e);return Gs(t,o,s,e),Sr(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function Sh(t,e,n){const r={};return Sr(r,Er(t,e)),t.create(e,t.Fragment,r,n)}function Eh(t,e){return e.value}function Gs(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function Sr(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function Ch(t,e,n){return r;function r(i,s,o,a){const c=Array.isArray(o.children)?n:e;return a?c(s,o,a):c(s,o)}}function Th(t,e){return n;function n(r,i,s,o){const a=Array.isArray(s.children),l=_r(r);return e(i,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function Ah(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&kr.call(e.properties,i)){const s=Ih(t,i,e.properties[i]);if(s){const[o,a]=s;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&bh.has(e.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function Ph(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else en(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const a=r.value.data.estree.body[0];a.type,s=t.evaluater.evaluateExpression(a.expression)}else en(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function Er(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:gh;for(;++r<e.children.length;){const s=e.children[r];let o;if(t.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const c=i.get(l)||0;o=l+"-"+c,i.set(l,c+1)}}const a=Ws(t,s,o);a!==void 0&&n.push(a)}return n}function Ih(t,e,n){const r=Dc(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?Sc(n):Fc(n)),r.property==="style"){let i=typeof n=="object"?n:Oh(t,String(n));return t.stylePropertyNameCase==="css"&&(i=Rh(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?jc[r.property]||r.property:r.attribute,n]}}function Oh(t,e){try{return fh(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new ve("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=Hs+"#cannot-parse-style-attribute",i}}function Ks(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const a=Es(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=Es(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return kr.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);en(t)}function en(t,e){const n=new ve("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=Hs+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Rh(t){const e={};let n;for(n in t)kr.call(t,n)&&(e[jh(n)]=t[n]);return e}function jh(t){let e=t.replace(mh,Lh);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function Lh(t){return"-"+t.toLowerCase()}const Cr={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},$h={};function Dh(t,e){const n=$h,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Js(t,r,i)}function Js(t,e,n){if(Nh(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return Ys(t.children,e,n)}return Array.isArray(t)?Ys(t,e,n):""}function Ys(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=Js(t[i],e,n);return r.join("")}function Nh(t){return!!(t&&typeof t=="object")}const Xs=document.createElement("i");function Tr(t){const e="&"+t+";";Xs.innerHTML=e;const n=Xs.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Ue(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function Le(t,e){return t.length>0?(Ue(t,t.length,0,e),t):e}const Qs={}.hasOwnProperty;function Mh(t){const e={};let n=-1;for(;++n<t.length;)zh(e,t[n]);return e}function zh(t,e){let n;for(n in e){const i=(Qs.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){Qs.call(i,o)||(i[o]=[]);const a=s[o];Fh(i[o],Array.isArray(a)?a:a?[a]:[])}}}function Fh(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);Ue(t,0,0,r)}function Zs(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function jt(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Be=it(/[A-Za-z]/),Pe=it(/[\dA-Za-z]/),Uh=it(/[#-'*+\--9=?A-Z^-~]/);function Ar(t){return t!==null&&(t<32||t===127)}const Pr=it(/\d/),Bh=it(/[\dA-Fa-f]/),qh=it(/[!-/:-@[-`{-~]/);function z(t){return t!==null&&t<-2}function Ee(t){return t!==null&&(t<0||t===32)}function Q(t){return t===-2||t===-1||t===32}const Vh=it(new RegExp("\\p{P}|\\p{S}","u")),Hh=it(/\s/);function it(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Lt(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&Pe(t.charCodeAt(n+1))&&Pe(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o="�"}else o=String.fromCharCode(s);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function se(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return Q(l)?(t.enter(n),a(l)):e(l)}function a(l){return Q(l)&&s++<i?(t.consume(l),a):(t.exit(n),e(l))}}const Wh={tokenize:Gh};function Gh(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),se(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),s(a)}function s(a){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return z(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const Kh={tokenize:Jh},eo={tokenize:Yh};function Jh(t){const e=this,n=[];let r=0,i,s,o;return a;function a(k){if(r<n.length){const I=n[r];return e.containerState=I[1],t.attempt(I[0].continuation,l,c)(k)}return c(k)}function l(k){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&C();const I=e.events.length;let $=I,_;for(;$--;)if(e.events[$][0]==="exit"&&e.events[$][1].type==="chunkFlow"){_=e.events[$][1].end;break}v(r);let D=I;for(;D<e.events.length;)e.events[D][1].end={..._},D++;return Ue(e.events,$+1,0,e.events.slice(I)),e.events.length=D,c(k)}return a(k)}function c(k){if(r===n.length){if(!i)return f(k);if(i.currentConstruct&&i.currentConstruct.concrete)return y(k);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(eo,u,h)(k)}function u(k){return i&&C(),v(r),f(k)}function h(k){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,y(k)}function f(k){return e.containerState={},t.attempt(eo,d,y)(k)}function d(k){return r++,n.push([e.currentConstruct,e.containerState]),f(k)}function y(k){if(k===null){i&&C(),v(0),t.consume(k);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),b(k)}function b(k){if(k===null){w(t.exit("chunkFlow"),!0),v(0),t.consume(k);return}return z(k)?(t.consume(k),w(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(k),b)}function w(k,I){const $=e.sliceStream(k);if(I&&$.push(null),k.previous=s,s&&(s.next=k),s=k,i.defineSkip(k.start),i.write($),e.parser.lazy[k.start.line]){let _=i.events.length;for(;_--;)if(i.events[_][1].start.offset<o&&(!i.events[_][1].end||i.events[_][1].end.offset>o))return;const D=e.events.length;let G=D,F,j;for(;G--;)if(e.events[G][0]==="exit"&&e.events[G][1].type==="chunkFlow"){if(F){j=e.events[G][1].end;break}F=!0}for(v(r),_=D;_<e.events.length;)e.events[_][1].end={...j},_++;Ue(e.events,G+1,0,e.events.slice(D)),e.events.length=_}}function v(k){let I=n.length;for(;I-- >k;){const $=n[I];e.containerState=$[1],$[0].exit.call(e,t)}n.length=k}function C(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function Yh(t,e,n){return se(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function to(t){if(t===null||Ee(t)||Hh(t))return 1;if(Vh(t))return 2}function Ir(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const Or={name:"attention",resolveAll:Xh,tokenize:Qh};function Xh(t,e){let n=-1,r,i,s,o,a,l,c,u;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const h={...t[r][1].end},f={...t[n][1].start};no(h,-l),no(f,l),o={type:l>1?"strongSequence":"emphasisSequence",start:h,end:{...t[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:f},s={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[r][1].end={...o.start},t[n][1].start={...a.end},c=[],t[r][1].end.offset-t[r][1].start.offset&&(c=Le(c,[["enter",t[r][1],e],["exit",t[r][1],e]])),c=Le(c,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),c=Le(c,Ir(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),c=Le(c,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(u=2,c=Le(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):u=0,Ue(t,r-1,n-r+3,c),n=r+c.length-u-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function Qh(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=to(r);let s;return o;function o(l){return s=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===s)return t.consume(l),a;const c=t.exit("attentionSequence"),u=to(l),h=!u||u===2&&i||n.includes(l),f=!i||i===2&&u||n.includes(r);return c._open=!!(s===42?h:h&&(i||!f)),c._close=!!(s===42?f:f&&(u||!h)),e(l)}}function no(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const Zh={name:"autolink",tokenize:ed};function ed(t,e,n){let r=0;return i;function i(d){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(d),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(d){return Be(d)?(t.consume(d),o):d===64?n(d):c(d)}function o(d){return d===43||d===45||d===46||Pe(d)?(r=1,a(d)):c(d)}function a(d){return d===58?(t.consume(d),r=0,l):(d===43||d===45||d===46||Pe(d))&&r++<32?(t.consume(d),a):(r=0,c(d))}function l(d){return d===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(d),t.exit("autolinkMarker"),t.exit("autolink"),e):d===null||d===32||d===60||Ar(d)?n(d):(t.consume(d),l)}function c(d){return d===64?(t.consume(d),u):Uh(d)?(t.consume(d),c):n(d)}function u(d){return Pe(d)?h(d):n(d)}function h(d){return d===46?(t.consume(d),r=0,u):d===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(d),t.exit("autolinkMarker"),t.exit("autolink"),e):f(d)}function f(d){if((d===45||Pe(d))&&r++<63){const y=d===45?f:h;return t.consume(d),y}return n(d)}}const Sn={partial:!0,tokenize:td};function td(t,e,n){return r;function r(s){return Q(s)?se(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||z(s)?e(s):n(s)}}const ro={continuation:{tokenize:rd},exit:id,name:"blockQuote",tokenize:nd};function nd(t,e,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Q(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function rd(t,e,n){const r=this;return i;function i(o){return Q(o)?se(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(ro,e,n)(o)}}function id(t){t.exit("blockQuote")}const io={name:"characterEscape",tokenize:sd};function sd(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return qh(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const so={name:"characterReference",tokenize:od};function od(t,e,n){const r=this;let i=0,s,o;return a;function a(h){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),l}function l(h){return h===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(h),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),s=31,o=Pe,u(h))}function c(h){return h===88||h===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(h),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=Bh,u):(t.enter("characterReferenceValue"),s=7,o=Pr,u(h))}function u(h){if(h===59&&i){const f=t.exit("characterReferenceValue");return o===Pe&&!Tr(r.sliceSerialize(f))?n(h):(t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(h)&&i++<s?(t.consume(h),u):n(h)}}const oo={partial:!0,tokenize:ld},ao={concrete:!0,name:"codeFenced",tokenize:ad};function ad(t,e,n){const r=this,i={partial:!0,tokenize:$};let s=0,o=0,a;return l;function l(_){return c(_)}function c(_){const D=r.events[r.events.length-1];return s=D&&D[1].type==="linePrefix"?D[2].sliceSerialize(D[1],!0).length:0,a=_,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),u(_)}function u(_){return _===a?(o++,t.consume(_),u):o<3?n(_):(t.exit("codeFencedFenceSequence"),Q(_)?se(t,h,"whitespace")(_):h(_))}function h(_){return _===null||z(_)?(t.exit("codeFencedFence"),r.interrupt?e(_):t.check(oo,b,I)(_)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),f(_))}function f(_){return _===null||z(_)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),h(_)):Q(_)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),se(t,d,"whitespace")(_)):_===96&&_===a?n(_):(t.consume(_),f)}function d(_){return _===null||z(_)?h(_):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),y(_))}function y(_){return _===null||z(_)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),h(_)):_===96&&_===a?n(_):(t.consume(_),y)}function b(_){return t.attempt(i,I,w)(_)}function w(_){return t.enter("lineEnding"),t.consume(_),t.exit("lineEnding"),v}function v(_){return s>0&&Q(_)?se(t,C,"linePrefix",s+1)(_):C(_)}function C(_){return _===null||z(_)?t.check(oo,b,I)(_):(t.enter("codeFlowValue"),k(_))}function k(_){return _===null||z(_)?(t.exit("codeFlowValue"),C(_)):(t.consume(_),k)}function I(_){return t.exit("codeFenced"),e(_)}function $(_,D,G){let F=0;return j;function j(L){return _.enter("lineEnding"),_.consume(L),_.exit("lineEnding"),O}function O(L){return _.enter("codeFencedFence"),Q(L)?se(_,T,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(L):T(L)}function T(L){return L===a?(_.enter("codeFencedFenceSequence"),N(L)):G(L)}function N(L){return L===a?(F++,_.consume(L),N):F>=o?(_.exit("codeFencedFenceSequence"),Q(L)?se(_,M,"whitespace")(L):M(L)):G(L)}function M(L){return L===null||z(L)?(_.exit("codeFencedFence"),D(L)):G(L)}}}function ld(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const Rr={name:"codeIndented",tokenize:cd},ud={partial:!0,tokenize:hd};function cd(t,e,n){const r=this;return i;function i(c){return t.enter("codeIndented"),se(t,s,"linePrefix",5)(c)}function s(c){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(c):n(c)}function o(c){return c===null?l(c):z(c)?t.attempt(ud,o,l)(c):(t.enter("codeFlowValue"),a(c))}function a(c){return c===null||z(c)?(t.exit("codeFlowValue"),o(c)):(t.consume(c),a)}function l(c){return t.exit("codeIndented"),e(c)}}function hd(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):z(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):se(t,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):z(o)?i(o):n(o)}}const dd={name:"codeText",previous:pd,resolve:fd,tokenize:gd};function fd(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function pd(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function gd(t,e,n){let r=0,i,s;return o;function o(h){return t.enter("codeText"),t.enter("codeTextSequence"),a(h)}function a(h){return h===96?(t.consume(h),r++,a):(t.exit("codeTextSequence"),l(h))}function l(h){return h===null?n(h):h===32?(t.enter("space"),t.consume(h),t.exit("space"),l):h===96?(s=t.enter("codeTextSequence"),i=0,u(h)):z(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),l):(t.enter("codeTextData"),c(h))}function c(h){return h===null||h===32||h===96||z(h)?(t.exit("codeTextData"),l(h)):(t.consume(h),c)}function u(h){return h===96?(t.consume(h),i++,u):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(h)):(s.type="codeTextData",c(h))}}class md{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&tn(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),tn(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),tn(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);tn(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);tn(this.left,n.reverse())}}}function tn(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function lo(t){const e={};let n=-1,r,i,s,o,a,l,c;const u=new md(t);for(;++n<u.length;){for(;n in e;)n=e[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,yd(u,n)),n=e[n],c=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=u.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...u.get(i)[1].start},a=u.slice(i,n),a.unshift(r),u.splice(i,n-i+1,a))}}return Ue(t,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function yd(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],c={};let u,h,f=-1,d=n,y=0,b=0;const w=[b];for(;d;){for(;t.get(++i)[1]!==d;);s.push(i),d._tokenizer||(u=r.sliceStream(d),d.next||u.push(null),h&&o.defineSkip(d.start),d._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),d._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=d,d=d.next}for(d=n;++f<a.length;)a[f][0]==="exit"&&a[f-1][0]==="enter"&&a[f][1].type===a[f-1][1].type&&a[f][1].start.line!==a[f][1].end.line&&(b=f+1,w.push(b),d._tokenizer=void 0,d.previous=void 0,d=d.next);for(o.events=[],d?(d._tokenizer=void 0,d.previous=void 0):w.pop(),f=w.length;f--;){const v=a.slice(w[f],w[f+1]),C=s.pop();l.push([C,C+v.length-1]),t.splice(C,2,v)}for(l.reverse(),f=-1;++f<l.length;)c[y+l[f][0]]=y+l[f][1],y+=l[f][1]-l[f][0]-1;return c}const bd={resolve:wd,tokenize:_d},vd={partial:!0,tokenize:xd};function wd(t){return lo(t),t}function _d(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):z(a)?t.check(vd,o,s)(a):(t.consume(a),i)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function xd(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),se(t,s,"linePrefix")}function s(o){if(o===null||z(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function uo(t,e,n,r,i,s,o,a,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return h;function h(v){return v===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(v),t.exit(s),f):v===null||v===32||v===41||Ar(v)?n(v):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),b(v))}function f(v){return v===62?(t.enter(s),t.consume(v),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),d(v))}function d(v){return v===62?(t.exit("chunkString"),t.exit(a),f(v)):v===null||v===60||z(v)?n(v):(t.consume(v),v===92?y:d)}function y(v){return v===60||v===62||v===92?(t.consume(v),d):d(v)}function b(v){return!u&&(v===null||v===41||Ee(v))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(v)):u<c&&v===40?(t.consume(v),u++,b):v===41?(t.consume(v),u--,b):v===null||v===32||v===40||Ar(v)?n(v):(t.consume(v),v===92?w:b)}function w(v){return v===40||v===41||v===92?(t.consume(v),b):b(v)}}function co(t,e,n,r,i,s){const o=this;let a=0,l;return c;function c(d){return t.enter(r),t.enter(i),t.consume(d),t.exit(i),t.enter(s),u}function u(d){return a>999||d===null||d===91||d===93&&!l||d===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(d):d===93?(t.exit(s),t.enter(i),t.consume(d),t.exit(i),t.exit(r),e):z(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),u):(t.enter("chunkString",{contentType:"string"}),h(d))}function h(d){return d===null||d===91||d===93||z(d)||a++>999?(t.exit("chunkString"),u(d)):(t.consume(d),l||(l=!Q(d)),d===92?f:h)}function f(d){return d===91||d===92||d===93?(t.consume(d),a++,h):h(d)}}function ho(t,e,n,r,i,s){let o;return a;function a(f){return f===34||f===39||f===40?(t.enter(r),t.enter(i),t.consume(f),t.exit(i),o=f===40?41:f,l):n(f)}function l(f){return f===o?(t.enter(i),t.consume(f),t.exit(i),t.exit(r),e):(t.enter(s),c(f))}function c(f){return f===o?(t.exit(s),l(o)):f===null?n(f):z(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),se(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),u(f))}function u(f){return f===o||f===null||z(f)?(t.exit("chunkString"),c(f)):(t.consume(f),f===92?h:u)}function h(f){return f===o||f===92?(t.consume(f),u):u(f)}}function nn(t,e){let n;return r;function r(i){return z(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):Q(i)?se(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const kd={name:"definition",tokenize:Ed},Sd={partial:!0,tokenize:Cd};function Ed(t,e,n){const r=this;let i;return s;function s(d){return t.enter("definition"),o(d)}function o(d){return co.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(d)}function a(d){return i=jt(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),d===58?(t.enter("definitionMarker"),t.consume(d),t.exit("definitionMarker"),l):n(d)}function l(d){return Ee(d)?nn(t,c)(d):c(d)}function c(d){return uo(t,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(d)}function u(d){return t.attempt(Sd,h,h)(d)}function h(d){return Q(d)?se(t,f,"whitespace")(d):f(d)}function f(d){return d===null||z(d)?(t.exit("definition"),r.parser.defined.push(i),e(d)):n(d)}}function Cd(t,e,n){return r;function r(a){return Ee(a)?nn(t,i)(a):n(a)}function i(a){return ho(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Q(a)?se(t,o,"whitespace")(a):o(a)}function o(a){return a===null||z(a)?e(a):n(a)}}const Td={name:"hardBreakEscape",tokenize:Ad};function Ad(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return z(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const Pd={name:"headingAtx",resolve:Id,tokenize:Od};function Id(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},Ue(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function Od(t,e,n){let r=0;return i;function i(u){return t.enter("atxHeading"),s(u)}function s(u){return t.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&r++<6?(t.consume(u),o):u===null||Ee(u)?(t.exit("atxHeadingSequence"),a(u)):n(u)}function a(u){return u===35?(t.enter("atxHeadingSequence"),l(u)):u===null||z(u)?(t.exit("atxHeading"),e(u)):Q(u)?se(t,a,"whitespace")(u):(t.enter("atxHeadingText"),c(u))}function l(u){return u===35?(t.consume(u),l):(t.exit("atxHeadingSequence"),a(u))}function c(u){return u===null||u===35||Ee(u)?(t.exit("atxHeadingText"),a(u)):(t.consume(u),c)}}const Rd=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],fo=["pre","script","style","textarea"],jd={concrete:!0,name:"htmlFlow",resolveTo:Dd,tokenize:Nd},Ld={partial:!0,tokenize:zd},$d={partial:!0,tokenize:Md};function Dd(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function Nd(t,e,n){const r=this;let i,s,o,a,l;return c;function c(m){return u(m)}function u(m){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(m),h}function h(m){return m===33?(t.consume(m),f):m===47?(t.consume(m),s=!0,b):m===63?(t.consume(m),i=3,r.interrupt?e:g):Be(m)?(t.consume(m),o=String.fromCharCode(m),w):n(m)}function f(m){return m===45?(t.consume(m),i=2,d):m===91?(t.consume(m),i=5,a=0,y):Be(m)?(t.consume(m),i=4,r.interrupt?e:g):n(m)}function d(m){return m===45?(t.consume(m),r.interrupt?e:g):n(m)}function y(m){const Ie="CDATA[";return m===Ie.charCodeAt(a++)?(t.consume(m),a===Ie.length?r.interrupt?e:T:y):n(m)}function b(m){return Be(m)?(t.consume(m),o=String.fromCharCode(m),w):n(m)}function w(m){if(m===null||m===47||m===62||Ee(m)){const Ie=m===47,Ke=o.toLowerCase();return!Ie&&!s&&fo.includes(Ke)?(i=1,r.interrupt?e(m):T(m)):Rd.includes(o.toLowerCase())?(i=6,Ie?(t.consume(m),v):r.interrupt?e(m):T(m)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(m):s?C(m):k(m))}return m===45||Pe(m)?(t.consume(m),o+=String.fromCharCode(m),w):n(m)}function v(m){return m===62?(t.consume(m),r.interrupt?e:T):n(m)}function C(m){return Q(m)?(t.consume(m),C):j(m)}function k(m){return m===47?(t.consume(m),j):m===58||m===95||Be(m)?(t.consume(m),I):Q(m)?(t.consume(m),k):j(m)}function I(m){return m===45||m===46||m===58||m===95||Pe(m)?(t.consume(m),I):$(m)}function $(m){return m===61?(t.consume(m),_):Q(m)?(t.consume(m),$):k(m)}function _(m){return m===null||m===60||m===61||m===62||m===96?n(m):m===34||m===39?(t.consume(m),l=m,D):Q(m)?(t.consume(m),_):G(m)}function D(m){return m===l?(t.consume(m),l=null,F):m===null||z(m)?n(m):(t.consume(m),D)}function G(m){return m===null||m===34||m===39||m===47||m===60||m===61||m===62||m===96||Ee(m)?$(m):(t.consume(m),G)}function F(m){return m===47||m===62||Q(m)?k(m):n(m)}function j(m){return m===62?(t.consume(m),O):n(m)}function O(m){return m===null||z(m)?T(m):Q(m)?(t.consume(m),O):n(m)}function T(m){return m===45&&i===2?(t.consume(m),oe):m===60&&i===1?(t.consume(m),te):m===62&&i===4?(t.consume(m),ue):m===63&&i===3?(t.consume(m),g):m===93&&i===5?(t.consume(m),me):z(m)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(Ld,$e,N)(m)):m===null||z(m)?(t.exit("htmlFlowData"),N(m)):(t.consume(m),T)}function N(m){return t.check($d,M,$e)(m)}function M(m){return t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),L}function L(m){return m===null||z(m)?N(m):(t.enter("htmlFlowData"),T(m))}function oe(m){return m===45?(t.consume(m),g):T(m)}function te(m){return m===47?(t.consume(m),o="",fe):T(m)}function fe(m){if(m===62){const Ie=o.toLowerCase();return fo.includes(Ie)?(t.consume(m),ue):T(m)}return Be(m)&&o.length<8?(t.consume(m),o+=String.fromCharCode(m),fe):T(m)}function me(m){return m===93?(t.consume(m),g):T(m)}function g(m){return m===62?(t.consume(m),ue):m===45&&i===2?(t.consume(m),g):T(m)}function ue(m){return m===null||z(m)?(t.exit("htmlFlowData"),$e(m)):(t.consume(m),ue)}function $e(m){return t.exit("htmlFlow"),e(m)}}function Md(t,e,n){const r=this;return i;function i(o){return z(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function zd(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(Sn,e,n)}}const Fd={name:"htmlText",tokenize:Ud};function Ud(t,e,n){const r=this;let i,s,o;return a;function a(g){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(g),l}function l(g){return g===33?(t.consume(g),c):g===47?(t.consume(g),$):g===63?(t.consume(g),k):Be(g)?(t.consume(g),G):n(g)}function c(g){return g===45?(t.consume(g),u):g===91?(t.consume(g),s=0,y):Be(g)?(t.consume(g),C):n(g)}function u(g){return g===45?(t.consume(g),d):n(g)}function h(g){return g===null?n(g):g===45?(t.consume(g),f):z(g)?(o=h,te(g)):(t.consume(g),h)}function f(g){return g===45?(t.consume(g),d):h(g)}function d(g){return g===62?oe(g):g===45?f(g):h(g)}function y(g){const ue="CDATA[";return g===ue.charCodeAt(s++)?(t.consume(g),s===ue.length?b:y):n(g)}function b(g){return g===null?n(g):g===93?(t.consume(g),w):z(g)?(o=b,te(g)):(t.consume(g),b)}function w(g){return g===93?(t.consume(g),v):b(g)}function v(g){return g===62?oe(g):g===93?(t.consume(g),v):b(g)}function C(g){return g===null||g===62?oe(g):z(g)?(o=C,te(g)):(t.consume(g),C)}function k(g){return g===null?n(g):g===63?(t.consume(g),I):z(g)?(o=k,te(g)):(t.consume(g),k)}function I(g){return g===62?oe(g):k(g)}function $(g){return Be(g)?(t.consume(g),_):n(g)}function _(g){return g===45||Pe(g)?(t.consume(g),_):D(g)}function D(g){return z(g)?(o=D,te(g)):Q(g)?(t.consume(g),D):oe(g)}function G(g){return g===45||Pe(g)?(t.consume(g),G):g===47||g===62||Ee(g)?F(g):n(g)}function F(g){return g===47?(t.consume(g),oe):g===58||g===95||Be(g)?(t.consume(g),j):z(g)?(o=F,te(g)):Q(g)?(t.consume(g),F):oe(g)}function j(g){return g===45||g===46||g===58||g===95||Pe(g)?(t.consume(g),j):O(g)}function O(g){return g===61?(t.consume(g),T):z(g)?(o=O,te(g)):Q(g)?(t.consume(g),O):F(g)}function T(g){return g===null||g===60||g===61||g===62||g===96?n(g):g===34||g===39?(t.consume(g),i=g,N):z(g)?(o=T,te(g)):Q(g)?(t.consume(g),T):(t.consume(g),M)}function N(g){return g===i?(t.consume(g),i=void 0,L):g===null?n(g):z(g)?(o=N,te(g)):(t.consume(g),N)}function M(g){return g===null||g===34||g===39||g===60||g===61||g===96?n(g):g===47||g===62||Ee(g)?F(g):(t.consume(g),M)}function L(g){return g===47||g===62||Ee(g)?F(g):n(g)}function oe(g){return g===62?(t.consume(g),t.exit("htmlTextData"),t.exit("htmlText"),e):n(g)}function te(g){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),fe}function fe(g){return Q(g)?se(t,me,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(g):me(g)}function me(g){return t.enter("htmlTextData"),o(g)}}const jr={name:"labelEnd",resolveAll:Hd,resolveTo:Wd,tokenize:Gd},Bd={tokenize:Kd},qd={tokenize:Jd},Vd={tokenize:Yd};function Hd(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&Ue(t,0,t.length,n),t}function Wd(t,e){let n=t.length,r=0,i,s,o,a;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},u={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",l,e],["enter",c,e]],a=Le(a,t.slice(s+1,s+r+3)),a=Le(a,[["enter",u,e]]),a=Le(a,Ir(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),a=Le(a,[["exit",u,e],t[o-2],t[o-1],["exit",c,e]]),a=Le(a,t.slice(o+1)),a=Le(a,[["exit",l,e]]),Ue(t,s,t.length,a),t}function Gd(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(f){return s?s._inactive?h(f):(o=r.parser.defined.includes(jt(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(f),t.exit("labelMarker"),t.exit("labelEnd"),l):n(f)}function l(f){return f===40?t.attempt(Bd,u,o?u:h)(f):f===91?t.attempt(qd,u,o?c:h)(f):o?u(f):h(f)}function c(f){return t.attempt(Vd,u,h)(f)}function u(f){return e(f)}function h(f){return s._balanced=!0,n(f)}}function Kd(t,e,n){return r;function r(h){return t.enter("resource"),t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),i}function i(h){return Ee(h)?nn(t,s)(h):s(h)}function s(h){return h===41?u(h):uo(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return Ee(h)?nn(t,l)(h):u(h)}function a(h){return n(h)}function l(h){return h===34||h===39||h===40?ho(t,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):u(h)}function c(h){return Ee(h)?nn(t,u)(h):u(h)}function u(h){return h===41?(t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),t.exit("resource"),e):n(h)}}function Jd(t,e,n){const r=this;return i;function i(a){return co.call(r,t,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(jt(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function Yd(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const Xd={name:"labelStartImage",resolveAll:jr.resolveAll,tokenize:Qd};function Qd(t,e,n){const r=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const Zd={name:"labelStartLink",resolveAll:jr.resolveAll,tokenize:ef};function ef(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const Lr={name:"lineEnding",tokenize:tf};function tf(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),se(t,e,"linePrefix")}}const En={name:"thematicBreak",tokenize:nf};function nf(t,e,n){let r=0,i;return s;function s(c){return t.enter("thematicBreak"),o(c)}function o(c){return i=c,a(c)}function a(c){return c===i?(t.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||z(c))?(t.exit("thematicBreak"),e(c)):n(c)}function l(c){return c===i?(t.consume(c),r++,l):(t.exit("thematicBreakSequence"),Q(c)?se(t,a,"whitespace")(c):a(c))}}const Ce={continuation:{tokenize:af},exit:uf,name:"list",tokenize:of},rf={partial:!0,tokenize:cf},sf={partial:!0,tokenize:lf};function of(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(d){const y=r.containerState.type||(d===42||d===43||d===45?"listUnordered":"listOrdered");if(y==="listUnordered"?!r.containerState.marker||d===r.containerState.marker:Pr(d)){if(r.containerState.type||(r.containerState.type=y,t.enter(y,{_container:!0})),y==="listUnordered")return t.enter("listItemPrefix"),d===42||d===45?t.check(En,n,c)(d):c(d);if(!r.interrupt||d===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(d)}return n(d)}function l(d){return Pr(d)&&++o<10?(t.consume(d),l):(!r.interrupt||o<2)&&(r.containerState.marker?d===r.containerState.marker:d===41||d===46)?(t.exit("listItemValue"),c(d)):n(d)}function c(d){return t.enter("listItemMarker"),t.consume(d),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||d,t.check(Sn,r.interrupt?n:u,t.attempt(rf,f,h))}function u(d){return r.containerState.initialBlankLine=!0,s++,f(d)}function h(d){return Q(d)?(t.enter("listItemPrefixWhitespace"),t.consume(d),t.exit("listItemPrefixWhitespace"),f):n(d)}function f(d){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(d)}}function af(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(Sn,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,se(t,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Q(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(sf,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,se(t,t.attempt(Ce,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function lf(t,e,n){const r=this;return se(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function uf(t){t.exit(this.containerState.type)}function cf(t,e,n){const r=this;return se(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Q(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const po={name:"setextUnderline",resolveTo:hf,tokenize:df};function hf(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function df(t,e,n){const r=this;let i;return s;function s(c){let u=r.events.length,h;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){h=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(t.enter("setextHeadingLine"),i=c,o(c)):n(c)}function o(c){return t.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===i?(t.consume(c),a):(t.exit("setextHeadingLineSequence"),Q(c)?se(t,l,"lineSuffix")(c):l(c))}function l(c){return c===null||z(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}const ff={tokenize:pf};function pf(t){const e=this,n=t.attempt(Sn,r,t.attempt(this.parser.constructs.flowInitial,i,se(t,t.attempt(this.parser.constructs.flow,i,t.attempt(bd,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const gf={resolveAll:mo()},mf=go("string"),yf=go("text");function go(t){return{resolveAll:mo(t==="text"?bf:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,a);return o;function o(u){return c(u)?s(u):a(u)}function a(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),l}function l(u){return c(u)?(n.exit("data"),s(u)):(n.consume(u),l)}function c(u){if(u===null)return!0;const h=i[u];let f=-1;if(h)for(;++f<h.length;){const d=h[f];if(!d.previous||d.previous.call(r,r.previous))return!0}return!1}}}function mo(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function bf(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const c=i[s];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(c===-2)l=!0,a++;else if(c!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(a=0),a){const c={type:n===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}const vf=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:{null:[42,95]},contentInitial:{91:kd},disable:{null:[]},document:{42:Ce,43:Ce,45:Ce,48:Ce,49:Ce,50:Ce,51:Ce,52:Ce,53:Ce,54:Ce,55:Ce,56:Ce,57:Ce,62:ro},flow:{35:Pd,42:En,45:[po,En],60:jd,61:po,95:En,96:ao,126:ao},flowInitial:{[-2]:Rr,[-1]:Rr,32:Rr},insideSpan:{null:[Or,gf]},string:{38:so,92:io},text:{[-5]:Lr,[-4]:Lr,[-3]:Lr,33:Xd,38:so,42:Or,60:[Zh,Fd],91:Zd,92:[Td,io],93:jr,95:Or,96:dd}},Symbol.toStringTag,{value:"Module"}));function wf(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],a=[];const l={attempt:D($),check:D(_),consume:C,enter:k,exit:I,interrupt:D(_,{interrupt:!0})},c={code:null,containerState:{},defineSkip:b,events:[],now:y,parser:t,previous:null,sliceSerialize:f,sliceStream:d,write:h};let u=e.tokenize.call(c,l);return e.resolveAll&&s.push(e),c;function h(O){return o=Le(o,O),w(),o[o.length-1]!==null?[]:(G(e,0),c.events=Ir(s,c.events,c),c.events)}function f(O,T){return xf(d(O),T)}function d(O){return _f(o,O)}function y(){const{_bufferIndex:O,_index:T,line:N,column:M,offset:L}=r;return{_bufferIndex:O,_index:T,line:N,column:M,offset:L}}function b(O){i[O.line]=O.column,j()}function w(){let O;for(;r._index<o.length;){const T=o[r._index];if(typeof T=="string")for(O=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===O&&r._bufferIndex<T.length;)v(T.charCodeAt(r._bufferIndex));else v(T)}}function v(O){u=u(O)}function C(O){z(O)?(r.line++,r.column=1,r.offset+=O===-3?2:1,j()):O!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=O}function k(O,T){const N=T||{};return N.type=O,N.start=y(),c.events.push(["enter",N,c]),a.push(N),N}function I(O){const T=a.pop();return T.end=y(),c.events.push(["exit",T,c]),T}function $(O,T){G(O,T.from)}function _(O,T){T.restore()}function D(O,T){return N;function N(M,L,oe){let te,fe,me,g;return Array.isArray(M)?$e(M):"tokenize"in M?$e([M]):ue(M);function ue(ce){return Je;function Je(Oe){const Ve=Oe!==null&&ce[Oe],ze=Oe!==null&&ce.null,Dt=[...Array.isArray(Ve)?Ve:Ve?[Ve]:[],...Array.isArray(ze)?ze:ze?[ze]:[]];return $e(Dt)(Oe)}}function $e(ce){return te=ce,fe=0,ce.length===0?oe:m(ce[fe])}function m(ce){return Je;function Je(Oe){return g=F(),me=ce,ce.partial||(c.currentConstruct=ce),ce.name&&c.parser.constructs.disable.null.includes(ce.name)?Ke():ce.tokenize.call(T?Object.assign(Object.create(c),T):c,l,Ie,Ke)(Oe)}}function Ie(ce){return O(me,g),L}function Ke(ce){return g.restore(),++fe<te.length?m(te[fe]):oe}}}function G(O,T){O.resolveAll&&!s.includes(O)&&s.push(O),O.resolve&&Ue(c.events,T,c.events.length-T,O.resolve(c.events.slice(T),c)),O.resolveTo&&(c.events=O.resolveTo(c.events,c))}function F(){const O=y(),T=c.previous,N=c.currentConstruct,M=c.events.length,L=Array.from(a);return{from:M,restore:oe};function oe(){r=O,c.previous=T,c.currentConstruct=N,c.events.length=M,a=L,j()}}function j(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function _f(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function xf(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function kf(t){const r={constructs:Mh([vf,...(t||{}).extensions||[]]),content:i(Wh),defined:[],document:i(Kh),flow:i(ff),lazy:{},string:i(mf),text:i(yf)};return r;function i(s){return o;function o(a){return wf(r,s,a)}}}function Sf(t){for(;!lo(t););return t}const yo=/[\0\t\n\r]/g;function Ef(){let t=1,e="",n=!0,r;return i;function i(s,o,a){const l=[];let c,u,h,f,d;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),h=0,e="",n&&(s.charCodeAt(0)===65279&&h++,n=void 0);h<s.length;){if(yo.lastIndex=h,c=yo.exec(s),f=c&&c.index!==void 0?c.index:s.length,d=s.charCodeAt(f),!c){e=s.slice(h);break}if(d===10&&h===f&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),h<f&&(l.push(s.slice(h,f)),t+=f-h),d){case 0:{l.push(65533),t++;break}case 9:{for(u=Math.ceil(t/4)*4,l.push(-2);t++<u;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}h=f+1}return a&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const Cf=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Tf(t){return t.replace(Cf,Af)}function Af(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return Zs(n.slice(s?2:1),s?16:10)}return Tr(n)||t}const bo={}.hasOwnProperty;function Pf(t,e,n){return typeof e!="string"&&(n=e,e=void 0),If(n)(Sf(kf(n).document().write(Ef()(t,e,!0))))}function If(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(mt),autolinkProtocol:F,autolinkEmail:F,atxHeading:s(gt),blockQuote:s(ze),characterEscape:F,characterReference:F,codeFenced:s(Dt),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Dt,o),codeText:s(Ln,o),codeTextData:F,data:F,codeFlowValue:F,definition:s(Yr),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Xr),hardBreakEscape:s(ot),hardBreakTrailing:s(ot),htmlFlow:s(an,o),htmlFlowData:F,htmlText:s(an,o),htmlTextData:F,image:s($n),label:o,link:s(mt),listItem:s(Qr),listItemValue:f,listOrdered:s(Dn,h),listUnordered:s(Dn),paragraph:s(ln),reference:m,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(gt),strong:s(Zr),thematicBreak:s(Nn)},exit:{atxHeading:l(),atxHeadingSequence:$,autolink:l(),autolinkEmail:Ve,autolinkProtocol:Oe,blockQuote:l(),characterEscapeValue:j,characterReferenceMarkerHexadecimal:Ke,characterReferenceMarkerNumeric:Ke,characterReferenceValue:ce,characterReference:Je,codeFenced:l(w),codeFencedFence:b,codeFencedFenceInfo:d,codeFencedFenceMeta:y,codeFlowValue:j,codeIndented:l(v),codeText:l(L),codeTextData:j,data:j,definition:l(),definitionDestinationString:I,definitionLabelString:C,definitionTitleString:k,emphasis:l(),hardBreakEscape:l(T),hardBreakTrailing:l(T),htmlFlow:l(N),htmlFlowData:j,htmlText:l(M),htmlTextData:j,image:l(te),label:me,labelText:fe,lineEnding:O,link:l(oe),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:Ie,resourceDestinationString:g,resourceTitleString:ue,resource:$e,setextHeading:l(G),setextHeadingLineSequence:D,setextHeadingText:_,strong:l(),thematicBreak:l()}};vo(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(x){let A={type:"root",children:[]};const B={stack:[A],tokenStack:[],config:e,enter:a,exit:c,buffer:o,resume:u,data:n},K=[];let Z=-1;for(;++Z<x.length;)if(x[Z][1].type==="listOrdered"||x[Z][1].type==="listUnordered")if(x[Z][0]==="enter")K.push(Z);else{const Re=K.pop();Z=i(x,Re,Z)}for(Z=-1;++Z<x.length;){const Re=e[x[Z][0]];bo.call(Re,x[Z][1].type)&&Re[x[Z][1].type].call(Object.assign({sliceSerialize:x[Z][2].sliceSerialize},B),x[Z][1])}if(B.tokenStack.length>0){const Re=B.tokenStack[B.tokenStack.length-1];(Re[1]||wo).call(B,void 0,Re[0])}for(A.position={start:st(x.length>0?x[0][1].start:{line:1,column:1,offset:0}),end:st(x.length>0?x[x.length-2][1].end:{line:1,column:1,offset:0})},Z=-1;++Z<e.transforms.length;)A=e.transforms[Z](A)||A;return A}function i(x,A,B){let K=A-1,Z=-1,Re=!1,Ye,Fe,yt,bt;for(;++K<=B;){const we=x[K];switch(we[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{we[0]==="enter"?Z++:Z--,bt=void 0;break}case"lineEndingBlank":{we[0]==="enter"&&(Ye&&!bt&&!Z&&!yt&&(yt=K),bt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:bt=void 0}if(!Z&&we[0]==="enter"&&we[1].type==="listItemPrefix"||Z===-1&&we[0]==="exit"&&(we[1].type==="listUnordered"||we[1].type==="listOrdered")){if(Ye){let at=K;for(Fe=void 0;at--;){const je=x[at];if(je[1].type==="lineEnding"||je[1].type==="lineEndingBlank"){if(je[0]==="exit")continue;Fe&&(x[Fe][1].type="lineEndingBlank",Re=!0),je[1].type="lineEnding",Fe=at}else if(!(je[1].type==="linePrefix"||je[1].type==="blockQuotePrefix"||je[1].type==="blockQuotePrefixWhitespace"||je[1].type==="blockQuoteMarker"||je[1].type==="listItemIndent"))break}yt&&(!Fe||yt<Fe)&&(Ye._spread=!0),Ye.end=Object.assign({},Fe?x[Fe][1].start:we[1].end),x.splice(Fe||K,0,["exit",Ye,we[2]]),K++,B++}if(we[1].type==="listItemPrefix"){const at={type:"listItem",_spread:!1,start:Object.assign({},we[1].start),end:void 0};Ye=at,x.splice(K,0,["enter",at,we[2]]),K++,B++,yt=void 0,bt=!0}}}return x[A][1]._spread=Re,B}function s(x,A){return B;function B(K){a.call(this,x(K),K),A&&A.call(this,K)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(x,A,B){this.stack[this.stack.length-1].children.push(x),this.stack.push(x),this.tokenStack.push([A,B||void 0]),x.position={start:st(A.start),end:void 0}}function l(x){return A;function A(B){x&&x.call(this,B),c.call(this,B)}}function c(x,A){const B=this.stack.pop(),K=this.tokenStack.pop();if(K)K[0].type!==x.type&&(A?A.call(this,x,K[0]):(K[1]||wo).call(this,x,K[0]));else throw new Error("Cannot close `"+x.type+"` ("+Zt({start:x.start,end:x.end})+"): it’s not open");B.position.end=st(x.end)}function u(){return Dh(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function f(x){if(this.data.expectingFirstListItemValue){const A=this.stack[this.stack.length-2];A.start=Number.parseInt(this.sliceSerialize(x),10),this.data.expectingFirstListItemValue=void 0}}function d(){const x=this.resume(),A=this.stack[this.stack.length-1];A.lang=x}function y(){const x=this.resume(),A=this.stack[this.stack.length-1];A.meta=x}function b(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function w(){const x=this.resume(),A=this.stack[this.stack.length-1];A.value=x.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function v(){const x=this.resume(),A=this.stack[this.stack.length-1];A.value=x.replace(/(\r?\n|\r)$/g,"")}function C(x){const A=this.resume(),B=this.stack[this.stack.length-1];B.label=A,B.identifier=jt(this.sliceSerialize(x)).toLowerCase()}function k(){const x=this.resume(),A=this.stack[this.stack.length-1];A.title=x}function I(){const x=this.resume(),A=this.stack[this.stack.length-1];A.url=x}function $(x){const A=this.stack[this.stack.length-1];if(!A.depth){const B=this.sliceSerialize(x).length;A.depth=B}}function _(){this.data.setextHeadingSlurpLineEnding=!0}function D(x){const A=this.stack[this.stack.length-1];A.depth=this.sliceSerialize(x).codePointAt(0)===61?1:2}function G(){this.data.setextHeadingSlurpLineEnding=void 0}function F(x){const B=this.stack[this.stack.length-1].children;let K=B[B.length-1];(!K||K.type!=="text")&&(K=ei(),K.position={start:st(x.start),end:void 0},B.push(K)),this.stack.push(K)}function j(x){const A=this.stack.pop();A.value+=this.sliceSerialize(x),A.position.end=st(x.end)}function O(x){const A=this.stack[this.stack.length-1];if(this.data.atHardBreak){const B=A.children[A.children.length-1];B.position.end=st(x.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(A.type)&&(F.call(this,x),j.call(this,x))}function T(){this.data.atHardBreak=!0}function N(){const x=this.resume(),A=this.stack[this.stack.length-1];A.value=x}function M(){const x=this.resume(),A=this.stack[this.stack.length-1];A.value=x}function L(){const x=this.resume(),A=this.stack[this.stack.length-1];A.value=x}function oe(){const x=this.stack[this.stack.length-1];if(this.data.inReference){const A=this.data.referenceType||"shortcut";x.type+="Reference",x.referenceType=A,delete x.url,delete x.title}else delete x.identifier,delete x.label;this.data.referenceType=void 0}function te(){const x=this.stack[this.stack.length-1];if(this.data.inReference){const A=this.data.referenceType||"shortcut";x.type+="Reference",x.referenceType=A,delete x.url,delete x.title}else delete x.identifier,delete x.label;this.data.referenceType=void 0}function fe(x){const A=this.sliceSerialize(x),B=this.stack[this.stack.length-2];B.label=Tf(A),B.identifier=jt(A).toLowerCase()}function me(){const x=this.stack[this.stack.length-1],A=this.resume(),B=this.stack[this.stack.length-1];if(this.data.inReference=!0,B.type==="link"){const K=x.children;B.children=K}else B.alt=A}function g(){const x=this.resume(),A=this.stack[this.stack.length-1];A.url=x}function ue(){const x=this.resume(),A=this.stack[this.stack.length-1];A.title=x}function $e(){this.data.inReference=void 0}function m(){this.data.referenceType="collapsed"}function Ie(x){const A=this.resume(),B=this.stack[this.stack.length-1];B.label=A,B.identifier=jt(this.sliceSerialize(x)).toLowerCase(),this.data.referenceType="full"}function Ke(x){this.data.characterReferenceType=x.type}function ce(x){const A=this.sliceSerialize(x),B=this.data.characterReferenceType;let K;B?(K=Zs(A,B==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):K=Tr(A);const Z=this.stack[this.stack.length-1];Z.value+=K}function Je(x){const A=this.stack.pop();A.position.end=st(x.end)}function Oe(x){j.call(this,x);const A=this.stack[this.stack.length-1];A.url=this.sliceSerialize(x)}function Ve(x){j.call(this,x);const A=this.stack[this.stack.length-1];A.url="mailto:"+this.sliceSerialize(x)}function ze(){return{type:"blockquote",children:[]}}function Dt(){return{type:"code",lang:null,meta:null,value:""}}function Ln(){return{type:"inlineCode",value:""}}function Yr(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Xr(){return{type:"emphasis",children:[]}}function gt(){return{type:"heading",depth:0,children:[]}}function ot(){return{type:"break"}}function an(){return{type:"html",value:""}}function $n(){return{type:"image",title:null,url:"",alt:null}}function mt(){return{type:"link",title:null,url:"",children:[]}}function Dn(x){return{type:"list",ordered:x.type==="listOrdered",start:null,spread:x._spread,children:[]}}function Qr(x){return{type:"listItem",spread:x._spread,checked:null,children:[]}}function ln(){return{type:"paragraph",children:[]}}function Zr(){return{type:"strong",children:[]}}function ei(){return{type:"text",value:""}}function Nn(){return{type:"thematicBreak"}}}function st(t){return{line:t.line,column:t.column,offset:t.offset}}function vo(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?vo(t,r):Of(t,r)}}function Of(t,e){let n;for(n in e)if(bo.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function wo(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Zt({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Zt({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Zt({start:e.start,end:e.end})+") is still open")}function Rf(t){const e=this;e.parser=n;function n(r){return Pf(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function jf(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function Lf(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function $f(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function Df(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Nf(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Mf(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=Lt(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let o,a=t.footnoteCounts.get(r);a===void 0?(a=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=s+1,a+=1,t.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,c),t.applyData(e,c)}function zf(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Ff(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function _o(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function Uf(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return _o(t,e);const i={src:Lt(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function Bf(t,e){const n={src:Lt(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function qf(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function Vf(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return _o(t,e);const i={href:Lt(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function Hf(t,e){const n={href:Lt(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function Wf(t,e,n){const r=t.all(e),i=n?Gf(n):xo(e),s={},o=[];if(typeof e.checked=="boolean"){const u=r[0];let h;u&&u.type==="element"&&u.tagName==="p"?h=u:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const u=r[a];(i||a!==0||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!i?o.push(...u.children):o.push(u)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,c),t.applyData(e,c)}function Gf(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=xo(n[r])}return e}function xo(t){const e=t.spread;return e??t.children.length>1}function Kf(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function Jf(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Yf(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function Xf(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Qf(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=_r(e.children[1]),l=Us(e.children[e.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function Zf(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:e.children.length;let l=-1;const c=[];for(;++l<a;){const h=e.children[l],f={},d=o?o[l]:void 0;d&&(f.align=d);let y={type:"element",tagName:s,properties:f,children:[]};h&&(y.children=t.all(h),t.patch(h,y),y=t.applyData(h,y)),c.push(y)}const u={type:"element",tagName:"tr",properties:{},children:t.wrap(c,!0)};return t.patch(e,u),t.applyData(e,u)}function ep(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const ko=9,So=32;function tp(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(Eo(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(Eo(e.slice(i),i>0,!1)),s.join("")}function Eo(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===ko||s===So;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===ko||s===So;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function np(t,e){const n={type:"text",value:tp(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function rp(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const ip={blockquote:jf,break:Lf,code:$f,delete:Df,emphasis:Nf,footnoteReference:Mf,heading:zf,html:Ff,imageReference:Uf,image:Bf,inlineCode:qf,linkReference:Vf,link:Hf,listItem:Wf,list:Kf,paragraph:Jf,root:Yf,strong:Xf,table:Qf,tableCell:ep,tableRow:Zf,text:np,thematicBreak:rp,toml:Cn,yaml:Cn,definition:Cn,footnoteDefinition:Cn};function Cn(){}const Co=-1,Tn=0,rn=1,An=2,$r=3,Dr=4,Nr=5,Mr=6,To=7,Ao=8,Po=typeof self=="object"?self:globalThis,sp=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case Tn:case Co:return n(o,i);case rn:{const a=n([],i);for(const l of o)a.push(r(l));return a}case An:{const a=n({},i);for(const[l,c]of o)a[r(l)]=r(c);return a}case $r:return n(new Date(o),i);case Dr:{const{source:a,flags:l}=o;return n(new RegExp(a,l),i)}case Nr:{const a=n(new Map,i);for(const[l,c]of o)a.set(r(l),r(c));return a}case Mr:{const a=n(new Set,i);for(const l of o)a.add(r(l));return a}case To:{const{name:a,message:l}=o;return n(new Po[a](l),i)}case Ao:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new Po[s](o),i)};return r},Io=t=>sp(new Map,t)(0),$t="",{toString:op}={},{keys:ap}=Object,sn=t=>{const e=typeof t;if(e!=="object"||!t)return[Tn,e];const n=op.call(t).slice(8,-1);switch(n){case"Array":return[rn,$t];case"Object":return[An,$t];case"Date":return[$r,$t];case"RegExp":return[Dr,$t];case"Map":return[Nr,$t];case"Set":return[Mr,$t];case"DataView":return[rn,n]}return n.includes("Array")?[rn,n]:n.includes("Error")?[To,n]:[An,n]},Pn=([t,e])=>t===Tn&&(e==="function"||e==="symbol"),lp=(t,e,n,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=sn(o);switch(a){case Tn:{let u=o;switch(l){case"bigint":a=Ao,u=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return i([Co],o)}return i([a,u],o)}case rn:{if(l){let f=o;return l==="DataView"?f=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(f=new Uint8Array(o)),i([l,[...f]],o)}const u=[],h=i([a,u],o);for(const f of o)u.push(s(f));return h}case An:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const u=[],h=i([a,u],o);for(const f of ap(o))(t||!Pn(sn(o[f])))&&u.push([s(f),s(o[f])]);return h}case $r:return i([a,o.toISOString()],o);case Dr:{const{source:u,flags:h}=o;return i([a,{source:u,flags:h}],o)}case Nr:{const u=[],h=i([a,u],o);for(const[f,d]of o)(t||!(Pn(sn(f))||Pn(sn(d))))&&u.push([s(f),s(d)]);return h}case Mr:{const u=[],h=i([a,u],o);for(const f of o)(t||!Pn(sn(f)))&&u.push(s(f));return h}}const{message:c}=o;return i([a,{name:l,message:c}],o)};return s},Oo=(t,{json:e,lossy:n}={})=>{const r=[];return lp(!(e||n),!!e,new Map,r)(t),r},In=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?Io(Oo(t,e)):structuredClone(t):(t,e)=>Io(Oo(t,e));function up(t,e){const n=[{type:"text",value:"↩"}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function cp(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function hp(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||up,r=t.options.footnoteBackLabel||cp,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<t.footnoteOrder.length;){const c=t.footnoteById.get(t.footnoteOrder[l]);if(!c)continue;const u=t.all(c),h=String(c.identifier).toUpperCase(),f=Lt(h.toLowerCase());let d=0;const y=[],b=t.footnoteCounts.get(h);for(;b!==void 0&&++d<=b;){y.length>0&&y.push({type:"text",value:" "});let C=typeof n=="string"?n:n(l,d);typeof C=="string"&&(C={type:"text",value:C}),y.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+f+(d>1?"-"+d:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,d),className:["data-footnote-backref"]},children:Array.isArray(C)?C:[C]})}const w=u[u.length-1];if(w&&w.type==="element"&&w.tagName==="p"){const C=w.children[w.children.length-1];C&&C.type==="text"?C.value+=" ":w.children.push({type:"text",value:" "}),w.children.push(...y)}else u.push(...y);const v={type:"element",tagName:"li",properties:{id:e+"fn-"+f},children:t.wrap(u,!0)};t.patch(c,v),a.push(v)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...In(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const Ro=function(t){if(t==null)return gp;if(typeof t=="function")return On(t);if(typeof t=="object")return Array.isArray(t)?dp(t):fp(t);if(typeof t=="string")return pp(t);throw new Error("Expected function, string, or object as test")};function dp(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=Ro(t[n]);return On(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function fp(t){const e=t;return On(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function pp(t){return On(e);function e(n){return n&&n.type===t}}function On(t){return e;function e(n,r,i){return!!(mp(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function gp(){return!0}function mp(t){return t!==null&&typeof t=="object"&&"type"in t}function Dg(t){return t}const jo=[],yp=!0,Lo=!1,bp="skip";function vp(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=Ro(i),o=r?-1:1;a(t,void 0,[])();function a(l,c,u){const h=l&&typeof l=="object"?l:{};if(typeof h.type=="string"){const d=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(l.type+(d?"<"+d+">":""))+")"})}return f;function f(){let d=jo,y,b,w;if((!e||s(l,c,u[u.length-1]||void 0))&&(d=wp(n(l,u)),d[0]===Lo))return d;if("children"in l&&l.children){const v=l;if(v.children&&d[0]!==bp)for(b=(r?v.children.length:-1)+o,w=u.concat(v);b>-1&&b<v.children.length;){const C=v.children[b];if(y=a(C,b,w)(),y[0]===Lo)return y;b=typeof y[1]=="number"?y[1]:b+o}}return d}}}function wp(t){return Array.isArray(t)?t:typeof t=="number"?[yp,t]:t==null?jo:[t]}function $o(t,e,n,r){let i,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),vp(t,s,a,i);function a(l,c){const u=c[c.length-1],h=u?u.children.indexOf(l):void 0;return o(l,h,u)}}const zr={}.hasOwnProperty,_p={};function xp(t,e){const n=e||_p,r=new Map,i=new Map,s=new Map,o={...ip,...n.handlers},a={all:c,applyData:Sp,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:n,patch:kp,wrap:Cp};return $o(t,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const h=u.type==="definition"?r:i,f=String(u.identifier).toUpperCase();h.has(f)||h.set(f,u)}}),a;function l(u,h){const f=u.type,d=a.handlers[f];if(zr.call(a.handlers,f)&&d)return d(a,u,h);if(a.options.passThrough&&a.options.passThrough.includes(f)){if("children"in u){const{children:b,...w}=u,v=In(w);return v.children=a.all(u),v}return In(u)}return(a.options.unknownHandler||Ep)(a,u,h)}function c(u){const h=[];if("children"in u){const f=u.children;let d=-1;for(;++d<f.length;){const y=a.one(f[d],u);if(y){if(d&&f[d-1].type==="break"&&(!Array.isArray(y)&&y.type==="text"&&(y.value=Do(y.value)),!Array.isArray(y)&&y.type==="element")){const b=y.children[0];b&&b.type==="text"&&(b.value=Do(b.value))}Array.isArray(y)?h.push(...y):h.push(y)}}}return h}}function kp(t,e){t.position&&(e.position=ph(t))}function Sp(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,In(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function Ep(t,e){const n=e.data||{},r="value"in e&&!(zr.call(n,"hProperties")||zr.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function Cp(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function Do(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function No(t,e){const n=xp(t,e),r=n.one(t,void 0),i=hp(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function Tp(t,e){return t&&"run"in t?async function(n,r){const i=No(n,{file:r,...e});await t.run(i,r)}:function(n,r){return No(n,{file:r,...t||e})}}function Mo(t){if(t)throw t}var Rn=Object.prototype.hasOwnProperty,zo=Object.prototype.toString,Fo=Object.defineProperty,Uo=Object.getOwnPropertyDescriptor,Bo=function(e){return typeof Array.isArray=="function"?Array.isArray(e):zo.call(e)==="[object Array]"},qo=function(e){if(!e||zo.call(e)!=="[object Object]")return!1;var n=Rn.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&Rn.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var i;for(i in e);return typeof i>"u"||Rn.call(e,i)},Vo=function(e,n){Fo&&n.name==="__proto__"?Fo(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},Ho=function(e,n){if(n==="__proto__")if(Rn.call(e,n)){if(Uo)return Uo(e,n).value}else return;return e[n]},Ap=function t(){var e,n,r,i,s,o,a=arguments[0],l=1,c=arguments.length,u=!1;for(typeof a=="boolean"&&(u=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<c;++l)if(e=arguments[l],e!=null)for(n in e)r=Ho(a,n),i=Ho(e,n),a!==i&&(u&&i&&(qo(i)||(s=Bo(i)))?(s?(s=!1,o=r&&Bo(r)?r:[]):o=r&&qo(r)?r:{},Vo(a,{name:n,newValue:t(u,o,i)})):typeof i<"u"&&Vo(a,{name:n,newValue:i}));return a};const Fr=ii(Ap);function Ur(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function Pp(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...c){const u=t[++s];let h=-1;if(l){o(l);return}for(;++h<i.length;)(c[h]===null||c[h]===void 0)&&(c[h]=i[h]);i=c,u?Ip(u,a)(...c):o(null,...c)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function Ip(t,e){let n;return r;function r(...o){const a=t.length>o.length;let l;a&&o.push(i);try{l=t.apply(this,o)}catch(c){const u=c;if(a&&n)throw u;return i(u)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){n||(n=!0,e(o,...a))}function s(o){i(null,o)}}const qe={basename:Op,dirname:Rp,extname:jp,join:Lp,sep:"/"};function Op(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');on(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function Rp(t){if(on(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function jp(t){on(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function Lp(...t){let e=-1,n;for(;++e<t.length;)on(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":$p(n)}function $p(t){on(t);const e=t.codePointAt(0)===47;let n=Dp(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function Dp(t,e){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function on(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const Np={cwd:Mp};function Mp(){return"/"}function Br(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function zp(t){if(typeof t=="string")t=new URL(t);else if(!Br(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return Fp(t)}function Fp(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const qr=["history","path","basename","stem","extname","dirname"];class Wo{constructor(e){let n;e?Br(e)?n={path:e}:typeof e=="string"||Up(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":Np.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<qr.length;){const s=qr[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)qr.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?qe.basename(this.path):void 0}set basename(e){Hr(e,"basename"),Vr(e,"basename"),this.path=qe.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?qe.dirname(this.path):void 0}set dirname(e){Go(this.basename,"dirname"),this.path=qe.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?qe.extname(this.path):void 0}set extname(e){if(Vr(e,"extname"),Go(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=qe.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Br(e)&&(e=zp(e)),Hr(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?qe.basename(this.path,this.extname):void 0}set stem(e){Hr(e,"stem"),Vr(e,"stem"),this.path=qe.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new ve(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Vr(t,e){if(t&&t.includes(qe.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+qe.sep+"`")}function Hr(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function Go(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function Up(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Bp=function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},qp={}.hasOwnProperty;class Wr extends Bp{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Pp()}copy(){const e=new Wr;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(Fr(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(Jr("data",this.frozen),this.namespace[e]=n,this):qp.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Jr("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=jn(e),r=this.parser||this.Parser;return Gr("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),Gr("process",this.parser||this.Parser),Kr("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=jn(e),l=r.parse(a);r.run(l,a,function(u,h,f){if(u||!h||!f)return c(u);const d=h,y=r.stringify(d,f);Wp(y)?f.value=y:f.result=y,c(u,f)});function c(u,h){u||!h?o(u):s?s(h):n(void 0,h)}}}processSync(e){let n=!1,r;return this.freeze(),Gr("processSync",this.parser||this.Parser),Kr("processSync",this.compiler||this.Compiler),this.process(e,i),Jo("processSync","process",n),r;function i(s,o){n=!0,Mo(s),r=o}}run(e,n,r){Ko(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=jn(n);i.run(e,l,c);function c(u,h,f){const d=h||e;u?a(u):o?o(d):r(void 0,d,f)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),Jo("runSync","run",r),i;function s(o,a){Mo(o),i=a,r=!0}}stringify(e,n){this.freeze();const r=jn(n),i=this.compiler||this.Compiler;return Kr("stringify",i),Ko(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(Jr("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...h]=c;l(u,h)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(i.settings=Fr(!0,i.settings,c.settings))}function a(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const h=c[u];s(h)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let h=-1,f=-1;for(;++h<r.length;)if(r[h][0]===c){f=h;break}if(f===-1)r.push([c,...u]);else if(u.length>0){let[d,...y]=u;const b=r[f][1];Ur(b)&&Ur(d)&&(d=Fr(!0,b,d)),r[f]=[c,d,...y]}}}}const Vp=new Wr().freeze();function Gr(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function Kr(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function Jr(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Ko(t){if(!Ur(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function Jo(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function jn(t){return Hp(t)?t:new Wo(t)}function Hp(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function Wp(t){return typeof t=="string"||Gp(t)}function Gp(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Kp="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Yo=[],Xo={allowDangerousHtml:!0},Jp=/^(https?|ircs?|mailto|xmpp)$/i,Yp=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Xp(t){const e=Qp(t),n=Zp(t);return eg(e.runSync(e.parse(n),n),t)}function Qp(t){const e=t.rehypePlugins||Yo,n=t.remarkPlugins||Yo,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...Xo}:Xo;return Vp().use(Rf).use(n).use(Tp,r).use(e)}function Zp(t){const e=t.children||"",n=new Wo;return typeof e=="string"&&(n.value=e),n}function eg(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,a=e.unwrapDisallowed,l=e.urlTransform||tg;for(const u of Yp)Object.hasOwn(e,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+Kp+u.id,void 0);return $o(t,c),vh(t,{Fragment:R.Fragment,components:i,ignoreInvalidStyle:!0,jsx:R.jsx,jsxs:R.jsxs,passKeys:!0,passNode:!0});function c(u,h,f){if(u.type==="raw"&&f&&typeof h=="number")return o?f.children.splice(h,1):f.children[h]={type:"text",value:u.value},h;if(u.type==="element"){let d;for(d in Cr)if(Object.hasOwn(Cr,d)&&Object.hasOwn(u.properties,d)){const y=u.properties[d],b=Cr[d];(b===null||b.includes(u.tagName))&&(u.properties[d]=l(String(y||""),d,u))}}if(u.type==="element"){let d=n?!n.includes(u.tagName):s?s.includes(u.tagName):!1;if(!d&&r&&typeof h=="number"&&(d=!r(u,h,f)),d&&f&&typeof h=="number")return a&&u.children?f.children.splice(h,1,...u.children):f.children.splice(h,1),h}}}function tg(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||Jp.test(t.slice(0,e))?t:""}const Qo=({clientId:t,isDemo:e=!1})=>{const[n,r]=le.useState(!1),[i,s]=le.useState(""),[o,a]=le.useState([]),[l,c]=le.useState(null),[u,h]=le.useState(null),[f,d]=le.useState(!1),[y,b]=le.useState(!1),w=le.useRef(null);le.useEffect(()=>{(async()=>{if(!t){console.error("❌ Client ID manquant");return}console.log(`🔄 Chargement config pour client: ${t}`),d(!0);try{const{data:F,error:j}=await kc.rpc("get_client_config_public",{p_client_id:t});if(j){console.error("❌ Erreur lors du chargement de la config:",j),h(`Configuration introuvable pour le client: ${t}`);return}if(!F||F.length===0){console.error("❌ Aucune configuration trouvée pour:",t),h(`Aucune configuration trouvée pour le client: ${t}`);return}const O=F[0];c(O),console.log("✅ Configuration chargée:",O)}catch(F){console.error("❌ Erreur réseau:",F),h("Erreur de connexion")}finally{d(!1)}})()},[t]);const v=async()=>{var j,O,T;if(!i.trim())return;const G={text:i,isUser:!0,timestamp:new Date().toLocaleTimeString()};a(N=>[...N,G]);const F=i;s("");try{if(!l){console.error("❌ Configuration client non chargée");return}if(e){setTimeout(()=>{const te={text:`**[DEMO]** Merci pour votre message: "${F}". 

Ceci est une réponse simulée avec du **markdown** :
- Point 1
- Point 2
- *Texte en italique*`,isUser:!1,timestamp:new Date().toLocaleTimeString()};a(fe=>[...fe,te])},500);return}console.log("🚀 Envoi message webhook:",{url:l.webhook_url,message:F});const N=await fetch(l.webhook_url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:F})});if(!N.ok)throw console.error("❌ Erreur webhook:",N.status,N.statusText),new Error(`Erreur ${N.status}: ${N.statusText}`);const M=await N.json();console.log("📥 Réponse webhook reçue:",M);let L="";Array.isArray(M)?L=((j=M[0])==null?void 0:j.texte)||((O=M[0])==null?void 0:O.text)||((T=M[0])==null?void 0:T.response)||"Réponse vide":typeof M=="object"?L=M.response||M.texte||M.text||M.message||"Réponse vide":typeof M=="string"?L=M:L="Format de réponse non reconnu",console.log("✅ Texte de réponse extrait:",L);const oe={text:L,isUser:!1,timestamp:new Date().toLocaleTimeString()};a(te=>[...te,oe])}catch(N){console.error("❌ Erreur lors de l'envoi du message:",N);const M={text:`⚠️ **Erreur de connexion**

Impossible de contacter le service. Veuillez réessayer dans quelques instants.

*Détails techniques: ${N instanceof Error?N.message:"Erreur inconnue"}*`,isUser:!1,timestamp:new Date().toLocaleTimeString()};a(L=>[...L,M])}};le.useEffect(()=>{w.current&&(w.current.scrollTop=w.current.scrollHeight)},[o]);const C=()=>{b(!y)},k={position:"fixed",bottom:"20px",right:"20px",zIndex:100},I={width:"350px",height:y?"100vh":"500px",display:"flex",flexDirection:"column",borderRadius:"0.75rem",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",overflow:"hidden"},$={padding:"1rem",backgroundColor:(l==null?void 0:l.banner_color)||(l==null?void 0:l.color_primary)||"#3B82F6",color:"#fff",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"space-between"},_={flex:1,padding:"1rem",overflowY:"auto",backgroundColor:(l==null?void 0:l.chat_background_color)||"#ffffff",color:(l==null?void 0:l.text_color)||"#000000"},D={padding:"1rem",borderTop:"1px solid #e2e8f0",display:"flex"};return u?R.jsx("div",{style:k,children:R.jsx(xt,{variant:"destructive",children:u})}):f?R.jsx("div",{style:k,children:R.jsx(xt,{variant:"secondary",disabled:!0,children:"Chargement..."})}):R.jsx("div",{style:k,children:n?R.jsxs(_i,{style:I,children:[R.jsxs("div",{style:$,children:[R.jsxs("div",{className:"flex items-center space-x-3",children:[R.jsxs($i,{children:[R.jsx(Di,{src:l==null?void 0:l.logo_url}),R.jsx(Ni,{children:R.jsx(Fi,{})})]}),R.jsx("span",{children:l==null?void 0:l.client_id})]}),R.jsx(xt,{variant:"ghost",size:"icon",onClick:C,children:y?"Réduire":"Plein écran"})]}),R.jsxs(xi,{style:{padding:"0"},children:[R.jsx("div",{style:_,ref:w,children:o.map((G,F)=>R.jsxs("div",{className:`mb-2 ${G.isUser?"text-right":"text-left"}`,children:[R.jsx("div",{className:`inline-block px-3 py-2 rounded-xl max-w-[80%] ${G.isUser?"bg-blue-500 text-white float-right":"bg-gray-200 text-gray-800 float-left"}`,children:G.isUser?R.jsxs(R.Fragment,{children:[G.text,R.jsx("div",{className:"text-xs mt-1 opacity-75",children:G.timestamp})]}):R.jsxs(R.Fragment,{children:[R.jsx("div",{className:"prose prose-sm max-w-none",children:R.jsx(Xp,{components:{p:({children:j})=>R.jsx("p",{className:"mb-2 last:mb-0",children:j}),strong:({children:j})=>R.jsx("strong",{className:"font-semibold",children:j}),em:({children:j})=>R.jsx("em",{className:"italic",children:j}),ul:({children:j})=>R.jsx("ul",{className:"list-disc list-inside mb-2",children:j}),ol:({children:j})=>R.jsx("ol",{className:"list-decimal list-inside mb-2",children:j}),li:({children:j})=>R.jsx("li",{className:"mb-1",children:j}),code:({children:j})=>R.jsx("code",{className:"bg-gray-300 px-1 rounded text-sm",children:j}),pre:({children:j})=>R.jsx("pre",{className:"bg-gray-300 p-2 rounded text-sm overflow-x-auto",children:j})},children:G.text})}),R.jsx("div",{className:"text-xs mt-2 opacity-75",children:G.timestamp})]})}),R.jsx("div",{className:"clearfix"})]},F))}),R.jsxs("div",{style:D,children:[R.jsx(wi,{type:"text",placeholder:"Votre message...",value:i,onChange:G=>s(G.target.value),onKeyPress:G=>G.key==="Enter"?v():null,className:"rounded-l-md"}),R.jsxs(xt,{onClick:v,className:"rounded-r-md",children:[R.jsx(dl,{className:"h-4 w-4 mr-2"}),"Envoyer"]})]})]})]}):R.jsxs(xt,{onClick:()=>r(!0),style:{backgroundColor:(l==null?void 0:l.color_primary)||"#3B82F6",color:"#fff"},children:[R.jsx(Fi,{className:"h-4 w-4 mr-2"}),"Besoin d'aide ?"]})})};Xe.ChatbotWidget=Qo,Xe.default=Qo,Object.defineProperties(Xe,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
